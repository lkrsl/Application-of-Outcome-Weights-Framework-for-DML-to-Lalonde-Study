<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 LaLonde-Dehejia-Wahba (LDW) Data | Application of the Outcome Weights Framework for Double Machine Learning to the Lalonde Study</title>
  <meta name="description" content="<p>This book replicates the LaLonde study by Imbens &amp; Xu (2024) and extends it by comparing a
full with a reduced covariate model to mitigate potential confounding.
It evaluates various methods to improve overlap and covariate balance for robust
treatment effect estimation and applies the outcome weights framework by Knaus &amp; Pfleiderer (2024)
to assess another estimator and analyse the distributional properties of outcome weights.
The analysis draws on the original LaLonde dataset as well as the LaLonde–Dehejia–Wahba (LDW) and LaLonde–Calónico–Smith (LCS) datasets.</p>" />
  <meta name="generator" content="bookdown 0.45 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 LaLonde-Dehejia-Wahba (LDW) Data | Application of the Outcome Weights Framework for Double Machine Learning to the Lalonde Study" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This book replicates the LaLonde study by Imbens &amp; Xu (2024) and extends it by comparing a
full with a reduced covariate model to mitigate potential confounding.
It evaluates various methods to improve overlap and covariate balance for robust
treatment effect estimation and applies the outcome weights framework by Knaus &amp; Pfleiderer (2024)
to assess another estimator and analyse the distributional properties of outcome weights.
The analysis draws on the original LaLonde dataset as well as the LaLonde–Dehejia–Wahba (LDW) and LaLonde–Calónico–Smith (LCS) datasets.</p>" />
  <meta name="github-repo" content="lkrsl/Application-of-Outcome-Weights-Framework-for-DML-to-Lalonde-Study" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 LaLonde-Dehejia-Wahba (LDW) Data | Application of the Outcome Weights Framework for Double Machine Learning to the Lalonde Study" />
  
  <meta name="twitter:description" content="<p>This book replicates the LaLonde study by Imbens &amp; Xu (2024) and extends it by comparing a
full with a reduced covariate model to mitigate potential confounding.
It evaluates various methods to improve overlap and covariate balance for robust
treatment effect estimation and applies the outcome weights framework by Knaus &amp; Pfleiderer (2024)
to assess another estimator and analyse the distributional properties of outcome weights.
The analysis draws on the original LaLonde dataset as well as the LaLonde–Dehejia–Wahba (LDW) and LaLonde–Calónico–Smith (LCS) datasets.</p>" />
  

<meta name="author" content="Laura Kreisel" />


<meta name="date" content="2025-11-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.34.0/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="tutorial/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Application of Outcome Weights Framework for DML to Lalonde Study</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html"><i class="fa fa-check"></i><b>1</b> LaLonde-Dehejia-Wahba (LDW) Data</a>
<ul>
<li class="chapter" data-level="1.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#set-up"><i class="fa fa-check"></i><b>1.1</b> Set up</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#source-functions-and-load-data"><i class="fa fa-check"></i><b>1.1.1</b> Source functions and load data</a></li>
<li class="chapter" data-level="1.1.2" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#inspect-data"><i class="fa fa-check"></i><b>1.1.2</b> Inspect data</a></li>
<li class="chapter" data-level="1.1.3" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#load-and-preprocess-data"><i class="fa fa-check"></i><b>1.1.3</b> Load and preprocess data</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#model-a"><i class="fa fa-check"></i><b>1.2</b> Model A</a></li>
<li class="chapter" data-level="1.3" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#assessing-overlap-and-covariate-balance"><i class="fa fa-check"></i><b>1.3</b> Assessing overlap and covariate balance</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#overlap"><i class="fa fa-check"></i><b>1.3.1</b> Overlap</a></li>
<li class="chapter" data-level="1.3.2" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#covariate-balance"><i class="fa fa-check"></i><b>1.3.2</b> Covariate balance</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#improving-overlap"><i class="fa fa-check"></i><b>1.4</b> Improving overlap</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#single-methods"><i class="fa fa-check"></i><b>1.4.1</b> Single methods</a></li>
<li class="chapter" data-level="1.4.2" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#integrated-methods"><i class="fa fa-check"></i><b>1.4.2</b> Integrated methods</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#assessing-methods"><i class="fa fa-check"></i><b>1.5</b> Assessing methods</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#single-methods-1"><i class="fa fa-check"></i><b>1.5.1</b> Single methods</a></li>
<li class="chapter" data-level="1.5.2" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#integrated-methods-1"><i class="fa fa-check"></i><b>1.5.2</b> Integrated methods</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#identifying-best-methods"><i class="fa fa-check"></i><b>1.6</b> Identifying best methods</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#ranking"><i class="fa fa-check"></i><b>1.6.1</b> Ranking</a></li>
<li class="chapter" data-level="1.6.2" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#dataset-construction"><i class="fa fa-check"></i><b>1.6.2</b> Dataset construction</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#estimating"><i class="fa fa-check"></i><b>1.7</b> Estimating</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="lalonde-dehejia-wahba-ldw-data.html"><a href="lalonde-dehejia-wahba-ldw-data.html#average-treatment-effect-on-the-treated-att"><i class="fa fa-check"></i><b>1.7.1</b> Average treatment effect on the treated (ATT)</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/lkrsl/Application-of-Outcome-Weights-Framework-for-DML-to-Lalonde-Study" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Application of the Outcome Weights Framework for Double Machine Learning to the Lalonde Study</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lalonde-dehejia-wahba-ldw-data" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> LaLonde-Dehejia-Wahba (LDW) Data<a href="lalonde-dehejia-wahba-ldw-data.html#lalonde-dehejia-wahba-ldw-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>LaLonde (1986) evaluated the effect of the National Supported Work Demonstration (NSW) program on both female and male participants. While the female participants were drawn from the Aid to Families with Dependent Children (AFDC) program, the male participants were drawn from three other groups: former drug addicts, ex-criminal offenders, and high-school dropouts. LaLonde relied on two main data sources:
(1) CPS-SSA-1, based on Westat’s Matched Current Population Survey–Social Security Administration File for individuals under 55 matching specific criteria;
(2) PSID-1, based on Panel Study of Income Dynamics for household heads under 55 from specific years who were not retired in 1975, adjusted for factors like employment status and poverty level, resulting in four additional comparison groups.</p>
<p>Dehejia and Wahba (1999) constructed a subset of LaLonde’s original data, retaining 62% of observations and restricting the focus to male participants based on their 1974 earnings. As the dataset was formed entirely on pretreatment information like employment records or month of assignment, treatment allocation was effectively independent of all pre-treatment variables. Thus, they concluded that this subset, known as the LaLonde-Dehejia-Wahba (LDW) data, constitutes a valid experimental sample.</p>
<p>The analysis in section 2 and 3 builds on the LDW data and considers in total three samples:
(1) LDW-Experimental, consisting of 185 treated individuals and 280 controls from the experimental data;
(2) LDW-CPS1, which pairs the same treated sample with 15,992 controls from CPS-SSA-1;
(3) LDW-PSID1, featuring the same treated sample with 2,490 controls from PSID-1;
In section 4, the analysis applies the same set of statistical tools to analyze a fourth sample as an additional demonstration:
(4) LaLonde male samples (1986).
In the last section, the analysis applies a reduced set of statistical tools to analyze a fifth sample again as an additional demonstration:
(5) LaLonde female samples (2017).</p>
<p>This section (2) covers model A, which includes the outcome variable 1978 earnings (<code>re78</code>) and adjusts for a set of covariates: age, education, race (<code>black</code>, <code>hispanic</code>), marital status, high school dropouts, 1974 and 1975 earnings (<code>re74</code>, <code>re75</code>), and unemployment status in 1974 and 1975 (<code>u74</code>, <code>u75</code>). The model is defined by a regression formula for treatment assignment using these covariates. To improve covariate balance and overlap between treated and control groups, various methods are applied and are structured into five parts (matching, weighting, truncation, trimming and integrated methods). From these methods, the five best methods are determined based on a score defined by absolute standardized mean differences (SMD) and the effective sample size (ESS). The corresponding datasets are used to estimate the average treatment effect on the treated (ATT). Notably, the estimation incorporates the recently introduced augmented inverse probability weighting (AIPW) estimator, implemented via the <code>OutcomeWeights</code> R package. Subsequently, alternative estimands are considered, including the conditional average treatment effect for the treated (CATT) and the quantile treatment effect on the treated (QTET). After estimating these effects, outcome weights are analyzed to identify potential patterns in the contribution of individual observations to the ATT. Placebo tests are then conducted using 1975 earnings (<code>re75</code>) as an outcome to assess potential biases and the validity of unconfoundedness assumptions. Finally, sensitivity analyses are performed to evaluate the robustness of treatment effect estimates to violations of these assumptions.</p>
<div id="set-up" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Set up<a href="lalonde-dehejia-wahba-ldw-data.html#set-up" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="source-functions-and-load-data" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Source functions and load data<a href="lalonde-dehejia-wahba-ldw-data.html#source-functions-and-load-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-1" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;https://github.com/xuyiqing/lalonde/blob/main/tutorial/functions.R?raw=TRUE&quot;</span>)</span>
<span id="cb1-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-2" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;tutorial/functions.R&quot;</span>)</span>
<span id="cb1-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-3" tabindex="-1"></a><span class="co">#source(&quot;C:/Users/lkreisel/workspace/uni-projects/Application-of-Outcome-Weights-Framework-for-DML-to-Lalonde-Study/tutorial/functions.R&quot;)</span></span>
<span id="cb1-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-4" tabindex="-1"></a><span class="co"># source functions (skip remote copy when offline)</span></span>
<span id="cb1-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-5" tabindex="-1"></a><span class="co"># remote_url &lt;- &quot;https://raw.githubusercontent.com/xuyiqing/lalonde/main/tutorial/functions.R&quot;</span></span>
<span id="cb1-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-6" tabindex="-1"></a><span class="co"># tryCatch(</span></span>
<span id="cb1-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-7" tabindex="-1"></a><span class="co">#         source(remote_url, local = FALSE),</span></span>
<span id="cb1-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-8" tabindex="-1"></a><span class="co">#         error = function(e) message(&quot;Skipping remote helper script: &quot;, conditionMessage(e))</span></span>
<span id="cb1-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-9" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb1-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb1-10" tabindex="-1"></a><span class="co"># source(&quot;tutorial/functions.R&quot;)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb2-1" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb2-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb2-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/lalonde.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb3-1" tabindex="-1"></a><span class="co"># set seed</span></span>
<span id="cb3-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb3-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span></code></pre></div>
</div>
<div id="inspect-data" class="section level3 hasAnchor" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span> Inspect data<a href="lalonde-dehejia-wahba-ldw-data.html#inspect-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We begin the analysis with an overview of each dataset, where the dataset name, number of observations (rows), number of treated and control units, number of variables (columns), and variable names are reviewed.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-1" tabindex="-1"></a><span class="co"># collect datasets in a list</span></span>
<span id="cb4-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">lalonde =</span> lalonde, <span class="at">ldw_tr =</span> ldw_tr, <span class="at">ldw_co =</span> ldw_co, <span class="at">ldw_cps =</span> ldw_cps, <span class="at">ldw_psid =</span> ldw_psid)</span>
<span id="cb4-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-4" tabindex="-1"></a><span class="co"># inspect key metrics of each dataset</span></span>
<span id="cb4-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-5" tabindex="-1"></a>summary_stats <span class="ot">&lt;-</span> <span class="fu">inspect_data</span>(data)</span>
<span id="cb4-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-6" tabindex="-1"></a><span class="fu">datatable</span>(summary_stats, <span class="at">caption =</span> <span class="st">&quot;Summary Statistics&quot;</span>,</span>
<span id="cb4-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb4-7" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">paging =</span> <span class="cn">FALSE</span>, <span class="at">pageLength =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">searching =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-30e4409849e39179307f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-30e4409849e39179307f">{"x":{"filter":"none","vertical":false,"caption":"<caption>Summary Statistics<\/caption>","data":[["1","2","3","4","5"],["lalonde","ldw_tr","ldw_co","ldw_cps","ldw_psid"],[614,185,260,16177,2675],[185,185,0,185,185],[429,0,260,15992,2490],[9,14,14,14,14],["treat, age, educ, race, married, nodegree, re74, re75, re78","data_id, treat, age, education, black, hispanic, married, nodegree, re74, re75, re78, u74, u75, sample","data_id, treat, age, education, black, hispanic, married, nodegree, re74, re75, re78, u74, u75, sample","data_id, treat, age, education, black, hispanic, married, nodegree, re74, re75, re78, u74, u75, sample","data_id, treat, age, education, black, hispanic, married, nodegree, re74, re75, re78, u74, u75, sample"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>dataset<\/th>\n      <th>num_obs<\/th>\n      <th>num_treated<\/th>\n      <th>num_controls<\/th>\n      <th>num_vars<\/th>\n      <th>name_vars<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"paging":false,"pageLength":-1,"searching":false,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"dataset","targets":1},{"name":"num_obs","targets":2},{"name":"num_treated","targets":3},{"name":"num_controls","targets":4},{"name":"num_vars","targets":5},{"name":"name_vars","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[-1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="load-and-preprocess-data" class="section level3 hasAnchor" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Load and preprocess data<a href="lalonde-dehejia-wahba-ldw-data.html#load-and-preprocess-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we augment the control groups in LDW-CPS1 and LDW-PSID1 by merging them with the experimental controls from LDW-Experimental. This approach follows the methodology laid out by <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>. These expanded datasets are used solely for comparative purposes, while all primary analyses rely on the original LDW‑CPS1 and LDW‑PSID1 data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-1" tabindex="-1"></a><span class="co"># assigns 1 to the experimental controls</span></span>
<span id="cb5-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-2" tabindex="-1"></a>ldw_co<span class="sc">$</span>treat <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb5-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-4" tabindex="-1"></a><span class="co"># merge experimental data with CPS1 data</span></span>
<span id="cb5-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-5" tabindex="-1"></a>ldw_cps_plus <span class="ot">&lt;-</span> <span class="fu">rbind.data.frame</span>(</span>
<span id="cb5-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-6" tabindex="-1"></a>  ldw_co,    <span class="co"># experimental controls </span></span>
<span id="cb5-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-7" tabindex="-1"></a>  ldw_cps    <span class="co"># CPS1 data </span></span>
<span id="cb5-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-8" tabindex="-1"></a>)</span>
<span id="cb5-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-10" tabindex="-1"></a><span class="co"># merge experimental data with PSID1 data</span></span>
<span id="cb5-11"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-11" tabindex="-1"></a>ldw_psid_plus <span class="ot">&lt;-</span> <span class="fu">rbind.data.frame</span>(</span>
<span id="cb5-12"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-12" tabindex="-1"></a>  ldw_co,    <span class="co"># experimental controls </span></span>
<span id="cb5-13"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-13" tabindex="-1"></a>  ldw_psid   <span class="co"># PSID1 data </span></span>
<span id="cb5-14"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-14" tabindex="-1"></a>)</span>
<span id="cb5-15"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-15" tabindex="-1"></a></span>
<span id="cb5-16"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-16" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ldw_cps_plus  =</span> ldw_cps_plus, <span class="at">ldw_psid_plus =</span> ldw_psid_plus)</span>
<span id="cb5-17"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-17" tabindex="-1"></a></span>
<span id="cb5-18"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-18" tabindex="-1"></a><span class="co"># inspect each dataset</span></span>
<span id="cb5-19"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-19" tabindex="-1"></a>summary_stats_plus <span class="ot">&lt;-</span> <span class="fu">inspect_data</span>(datasets)</span>
<span id="cb5-20"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-20" tabindex="-1"></a><span class="fu">datatable</span>(summary_stats_plus, <span class="at">caption =</span> <span class="st">&quot;Summary Statistics&quot;</span>,</span>
<span id="cb5-21"><a href="lalonde-dehejia-wahba-ldw-data.html#cb5-21" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">paging =</span> <span class="cn">FALSE</span>, <span class="at">pageLength =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">searching =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-2e17466358a46d139971" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2e17466358a46d139971">{"x":{"filter":"none","vertical":false,"caption":"<caption>Summary Statistics<\/caption>","data":[["1","2"],["ldw_cps_plus","ldw_psid_plus"],[16437,2935],[445,445],[15992,2490],[14,14],["data_id, treat, age, education, black, hispanic, married, nodegree, re74, re75, re78, u74, u75, sample","data_id, treat, age, education, black, hispanic, married, nodegree, re74, re75, re78, u74, u75, sample"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>dataset<\/th>\n      <th>num_obs<\/th>\n      <th>num_treated<\/th>\n      <th>num_controls<\/th>\n      <th>num_vars<\/th>\n      <th>name_vars<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"paging":false,"pageLength":-1,"searching":false,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"dataset","targets":1},{"name":"num_obs","targets":2},{"name":"num_treated","targets":3},{"name":"num_controls","targets":4},{"name":"num_vars","targets":5},{"name":"name_vars","targets":6}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[-1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="model-a" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Model A<a href="lalonde-dehejia-wahba-ldw-data.html#model-a" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Finally, we define Model A as the baseline specification underlying the analysis.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb6-1" tabindex="-1"></a><span class="co"># define variables</span></span>
<span id="cb6-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb6-2" tabindex="-1"></a>Y <span class="ot">&lt;-</span> <span class="st">&quot;re78&quot;</span> </span>
<span id="cb6-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb6-3" tabindex="-1"></a>treat <span class="ot">&lt;-</span> <span class="st">&quot;treat&quot;</span> </span>
<span id="cb6-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb6-4" tabindex="-1"></a>covar <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;education&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;hispanic&quot;</span>, <span class="st">&quot;married&quot;</span>, </span>
<span id="cb6-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb6-5" tabindex="-1"></a>           <span class="st">&quot;nodegree&quot;</span>, <span class="st">&quot;re74&quot;</span>, <span class="st">&quot;re75&quot;</span>, <span class="st">&quot;u74&quot;</span>, <span class="st">&quot;u75&quot;</span>) <span class="co">#re74 included</span></span></code></pre></div>
</div>
<div id="assessing-overlap-and-covariate-balance" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Assessing overlap and covariate balance<a href="lalonde-dehejia-wahba-ldw-data.html#assessing-overlap-and-covariate-balance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="overlap" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Overlap<a href="lalonde-dehejia-wahba-ldw-data.html#overlap" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To identify the average causal effect under unconfoundedness (that asserts that the treatment assignment is independent of the potential outcomes), it must be ensured that one can estimate the average effect at every value for the covariates. Thus, overlaps between the treated and untreated units (meaning that for every combination of covariates, there are both treated and untreated units in the dataset) are required. To assess overlap in the propensity scores and visualize the results using histograms of their log-odds, we use the <code>assess_overlap()</code> function of <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>.</p>
<div class="callout-note">
<p>In a properly balanced experimental design, the distributions of the treatment group (red) and the control group (gray) would show considerable coverage.</p>
</div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb7-1" tabindex="-1"></a>ldw.ps <span class="ot">&lt;-</span> <span class="fu">assess_overlap</span>(<span class="at">data =</span> ldw, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
<pre><code>## -1.310867 0.7158619</code></pre>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-8-1"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-8-1.png" alt="FIGUREA1. SubfigureA:LDW. SubfigureB:LDW-CPS1. SubfigureC:LDW-PSID1." width="100%" />
<p class="caption">
Figure 1.1: FIGUREA1. SubfigureA:LDW. SubfigureB:LDW-CPS1. SubfigureC:LDW-PSID1.
</p>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb9-1" tabindex="-1"></a>ldw_cps.ps <span class="ot">&lt;-</span> <span class="fu">assess_overlap</span>(<span class="at">data =</span> ldw_cps, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar) </span></code></pre></div>
<pre><code>## -16.1181 1.787343</code></pre>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-8-2"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-8-2.png" alt="FIGUREA1. SubfigureA:LDW. SubfigureB:LDW-CPS1. SubfigureC:LDW-PSID1." width="100%" />
<p class="caption">
Figure 1.2: FIGUREA1. SubfigureA:LDW. SubfigureB:LDW-CPS1. SubfigureC:LDW-PSID1.
</p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb11-1" tabindex="-1"></a>ldw_psid.ps <span class="ot">&lt;-</span> <span class="fu">assess_overlap</span>(<span class="at">data =</span> ldw_psid, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar) </span></code></pre></div>
<pre><code>## -16.1181 3.752723</code></pre>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-8-3"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-8-3.png" alt="FIGUREA1. SubfigureA:LDW. SubfigureB:LDW-CPS1. SubfigureC:LDW-PSID1." width="100%" />
<p class="caption">
Figure 1.3: FIGUREA1. SubfigureA:LDW. SubfigureB:LDW-CPS1. SubfigureC:LDW-PSID1.
</p>
</div>
<p>As anticipated, LDW-Experimental exhibits an almost perfect overlap. In contrast, the observational datasets LDW-CPS1 and LDW-PSID1 show weak overlap. Notably, many treated units have propensity scores outside the range of the controls, while a large share of control units have propensity scores concentrated at very low log-odds.</p>
<p>Next, the overlap of the expanded observational datasets is examined.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb13-1" tabindex="-1"></a>ldw_cps_plus.ps <span class="ot">&lt;-</span> <span class="fu">assess_overlap</span>(<span class="at">data =</span> ldw_cps_plus, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar) </span></code></pre></div>
<pre><code>## -16.1181 3.63151</code></pre>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-9-1"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-9-1.png" alt="FIGUREA1. SubfigureD:LDW-CPS1-PLUS. SubfigureE:LDW-PSID1-PLUS." width="80%" />
<p class="caption">
Figure 1.4: FIGUREA1. SubfigureD:LDW-CPS1-PLUS. SubfigureE:LDW-PSID1-PLUS.
</p>
</div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb15-1" tabindex="-1"></a>ldw_psid_plus.ps <span class="ot">&lt;-</span> <span class="fu">assess_overlap</span>(<span class="at">data =</span> ldw_psid_plus, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
<pre><code>## -16.1181 7.271394</code></pre>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-9-2"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-9-2.png" alt="FIGUREA1. SubfigureD:LDW-CPS1-PLUS. SubfigureE:LDW-PSID1-PLUS." width="80%" />
<p class="caption">
Figure 1.5: FIGUREA1. SubfigureD:LDW-CPS1-PLUS. SubfigureE:LDW-PSID1-PLUS.
</p>
</div>
<p>As expected, the datasets LDW-CPS1-PLUS and LDW-PSID1-PLUS show an improved overlap compared to their non-plus states.</p>
<p>For the following analysis, we set up a model formula.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb17-1" tabindex="-1"></a><span class="co"># set model formula</span></span>
<span id="cb17-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb17-2" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(treat, <span class="st">&quot;~&quot;</span>, <span class="fu">paste</span>(covar, <span class="at">collapse =</span> <span class="st">&quot; + &quot;</span>)))</span></code></pre></div>
</div>
<div id="covariate-balance" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Covariate balance<a href="lalonde-dehejia-wahba-ldw-data.html#covariate-balance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To make treatment and control groups more comparable, thus mimicking a randomized experiment, initial covariate balance is assessed to determine the degree to which treatment and control groups differ on observed characteristics. Therefore, we employ visual summaries using <code>love.plot()</code> by <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>, which depicts standardized mean differences across covariates before and after adjustment.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb18-1" tabindex="-1"></a><span class="co"># plot balance</span></span>
<span id="cb18-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb18-2" tabindex="-1"></a><span class="fu">love.plot</span>(ldw, ldw_cps, treat, <span class="at">covar =</span> covar, <span class="at">title =</span> <span class="st">&quot;LDW-CPS1&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11-1"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-11-1.png" alt="FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS." width="80%" />
<p class="caption">
Figure 1.6: FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS.
</p>
</div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb19-1" tabindex="-1"></a><span class="fu">love.plot</span>(ldw, ldw_psid, treat, <span class="at">covar =</span> covar, <span class="at">title =</span> <span class="st">&quot;LDW-PSID1&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11-2"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-11-2.png" alt="FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS." width="80%" />
<p class="caption">
Figure 1.7: FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS.
</p>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb20-1" tabindex="-1"></a><span class="fu">love.plot</span>(ldw, ldw_cps_plus, treat, <span class="at">covar =</span> covar, <span class="at">title =</span> <span class="st">&quot;LDW-CPS1-PLUS&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11-3"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-11-3.png" alt="FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS." width="80%" />
<p class="caption">
Figure 1.8: FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS.
</p>
</div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb21-1" tabindex="-1"></a><span class="fu">love.plot</span>(ldw, ldw_psid_plus, treat, <span class="at">covar =</span> covar, <span class="at">title =</span> <span class="st">&quot;LDW-PSID1-PLUS&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11-4"></span>
<img src="Outcome-Weights_files/figure-html/unnamed-chunk-11-4.png" alt="FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS." width="80%" />
<p class="caption">
Figure 1.9: FIGUREA2. SubfigureA:LDW-CPS1. SubfigureB:LDW-CPS1-PLUS. SubfigureC:LDW-PSID1. SubfigureD:LDW-PSID1-PLUS.
</p>
</div>
<p>Neither LDW-CPS1-PLUS nor LDW-PSID1-PLUS shows consistently improved covariate balance compared to their non-plus counterparts based on raw standardized mean differences. Although some specific covariates improve slightly, most show increased imbalance.</p>
<div class="callout-note">
<p>For the subsequent analysis aimed at enhancing covariate balance and overlap, only the two datasets LDW-CPS1 and LDW-PSID1 are used. The LDW-Experimental dataset is excluded from these steps, as randomization already ensures adequate covariate balance and overlap.</p>
</div>
</div>
</div>
<div id="improving-overlap" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Improving overlap<a href="lalonde-dehejia-wahba-ldw-data.html#improving-overlap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="single-methods" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Single methods<a href="lalonde-dehejia-wahba-ldw-data.html#single-methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="trimming" class="section level4 hasAnchor" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> Trimming<a href="lalonde-dehejia-wahba-ldw-data.html#trimming" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The purpose of trimming is to remove units whose propensity scores are too dissimilar from the opposite group, thereby improving covariate balance between treated and control groups. Below, we employ several trimming methods in line with the approaches proposed by <span class="citation">Stürmer et al. (<a href="#ref-Stuermer_2021">2021</a>)</span> and <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>.</p>
<ol style="list-style-type: decimal">
<li>Propensity score threshold trimming</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-1" tabindex="-1"></a><span class="co"># apply trimming with threshold 0.9</span></span>
<span id="cb22-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-2" tabindex="-1"></a>ldw_cps.ps_trim <span class="ot">&lt;-</span> <span class="fu">ps_trim</span>(ldw_cps.ps, <span class="at">threshold =</span> <span class="fl">0.9</span>)</span>
<span id="cb22-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-3" tabindex="-1"></a>ldw_psid.ps_trim <span class="ot">&lt;-</span> <span class="fu">ps_trim</span>(ldw_psid.ps, <span class="at">threshold =</span> <span class="fl">0.9</span>)</span>
<span id="cb22-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-5" tabindex="-1"></a><span class="co"># re-estimate propensity scores on trimmed data </span></span>
<span id="cb22-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-6" tabindex="-1"></a>ldw_cps.ps_trim <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_cps.ps_trim, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span>
<span id="cb22-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb22-7" tabindex="-1"></a>ldw_psid.ps_trim <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_psid.ps_trim, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Common range trimming</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-1" tabindex="-1"></a><span class="co"># trim observations outside the common support region of propensity scores</span></span>
<span id="cb23-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-2" tabindex="-1"></a>ldw_cps.ps_common   <span class="ot">&lt;-</span> <span class="fu">common_range_trim</span>(ldw_cps.ps)</span>
<span id="cb23-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-3" tabindex="-1"></a>ldw_psid.ps_common  <span class="ot">&lt;-</span> <span class="fu">common_range_trim</span>(ldw_psid.ps)</span>
<span id="cb23-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-4" tabindex="-1"></a></span>
<span id="cb23-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-5" tabindex="-1"></a><span class="co"># re-estimate propensity scores on trimmed data </span></span>
<span id="cb23-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-6" tabindex="-1"></a>ldw_cps.ps_common <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_cps.ps_common, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span>
<span id="cb23-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb23-7" tabindex="-1"></a>ldw_psid.ps_common <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_psid.ps_common, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Crump trimming</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-1" tabindex="-1"></a><span class="co"># trim observations with propensity scores outside [0.1, 0.9] interval</span></span>
<span id="cb24-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-2" tabindex="-1"></a>ldw_cps.ps_crump  <span class="ot">&lt;-</span> <span class="fu">crump_trim</span>(ldw_cps.ps, <span class="at">lower =</span> <span class="fl">0.1</span>, <span class="at">upper =</span> <span class="fl">0.9</span>)</span>
<span id="cb24-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-3" tabindex="-1"></a>ldw_psid.ps_crump <span class="ot">&lt;-</span> <span class="fu">crump_trim</span>(ldw_psid.ps, <span class="at">lower =</span> <span class="fl">0.1</span>, <span class="at">upper =</span> <span class="fl">0.9</span>)</span>
<span id="cb24-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-4" tabindex="-1"></a></span>
<span id="cb24-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-5" tabindex="-1"></a><span class="co"># re-estimate propensity scores on trimmed data </span></span>
<span id="cb24-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-6" tabindex="-1"></a>ldw_cps.ps_crump <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_cps.ps_crump, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span>
<span id="cb24-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb24-7" tabindex="-1"></a>ldw_psid.ps_crump <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_psid.ps_crump, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Stuermer trimming</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-1" tabindex="-1"></a><span class="co"># trim observations based on propensity score quantiles separately for treated and control</span></span>
<span id="cb25-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-2" tabindex="-1"></a>ldw_cps.ps_stuermer  <span class="ot">&lt;-</span> <span class="fu">stuermer_trim</span>(ldw_cps.ps)</span>
<span id="cb25-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-3" tabindex="-1"></a>ldw_psid.ps_stuermer <span class="ot">&lt;-</span> <span class="fu">stuermer_trim</span>(ldw_psid.ps)</span>
<span id="cb25-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-5" tabindex="-1"></a><span class="co"># re-estimate propensity scores on trimmed data </span></span>
<span id="cb25-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-6" tabindex="-1"></a>ldw_cps.ps_stuermer <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_cps.ps_stuermer, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span>
<span id="cb25-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb25-7" tabindex="-1"></a>ldw_psid.ps_stuermer <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_psid.ps_stuermer, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Walker trimming</li>
</ol>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-1" tabindex="-1"></a><span class="co"># trim observations based on preference scores that adjust for treatment prevalence using logit transformations</span></span>
<span id="cb26-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-2" tabindex="-1"></a>ldw_cps.ps_walker  <span class="ot">&lt;-</span> <span class="fu">walker_trim</span>(ldw_cps.ps)</span>
<span id="cb26-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-3" tabindex="-1"></a>ldw_psid.ps_walker <span class="ot">&lt;-</span> <span class="fu">walker_trim</span>(ldw_psid.ps)</span>
<span id="cb26-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-4" tabindex="-1"></a></span>
<span id="cb26-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-5" tabindex="-1"></a><span class="co"># re-estimate propensity scores on trimmed data </span></span>
<span id="cb26-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-6" tabindex="-1"></a>ldw_cps.ps_walker <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_cps.ps_walker, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span>
<span id="cb26-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb26-7" tabindex="-1"></a>ldw_psid.ps_walker <span class="ot">&lt;-</span> <span class="fu">ps_estimate</span>(<span class="at">data =</span> ldw_psid.ps_walker, <span class="at">treat =</span> treat, <span class="at">cov =</span> covar)</span></code></pre></div>
</div>
</div>
<div id="integrated-methods" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Integrated methods<a href="lalonde-dehejia-wahba-ldw-data.html#integrated-methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="trimming-and-matching" class="section level4 hasAnchor" number="1.4.2.1">
<h4><span class="header-section-number">1.4.2.1</span> Trimming and matching<a href="lalonde-dehejia-wahba-ldw-data.html#trimming-and-matching" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The purpose of matching is to create comparable treated and control groups by pairing units with similar covariate profiles, thereby reducing covariate imbalance and confounding bias. We apply several matching methods as outlined by <span class="citation">Greifer (<a href="#ref-Greifer_3_2025">2025</a>)</span> in the following.</p>
<div class="callout-note">
<p>For comparison, combinations of trimming and matching methods are applied in line with the tutorial by <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>, before being applied to the initial datasets.</p>
</div>
<div id="extended-datasets-similar-to-tutorial-by-imbens2024" class="section level5 hasAnchor" number="1.4.2.1.1">
<h5><span class="header-section-number">1.4.2.1.1</span> Extended datasets (similar to tutorial by <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>)<a href="lalonde-dehejia-wahba-ldw-data.html#extended-datasets-similar-to-tutorial-by-imbens2024" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-1" tabindex="-1"></a>ldw_cps_trim <span class="ot">&lt;-</span> <span class="fu">ps_trim</span>(ldw_cps_plus.ps, <span class="at">threshold =</span> <span class="fl">0.9</span>)</span>
<span id="cb27-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-2" tabindex="-1"></a>ldw_psid_trim <span class="ot">&lt;-</span> <span class="fu">ps_trim</span>(ldw_psid_plus.ps, <span class="at">threshold =</span> <span class="fl">0.8</span>)</span>
<span id="cb27-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-3" tabindex="-1"></a></span>
<span id="cb27-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-4" tabindex="-1"></a><span class="co"># excluding the experimental controls</span></span>
<span id="cb27-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-5" tabindex="-1"></a>ldw_cps.trim_match <span class="ot">&lt;-</span> <span class="fu">subset</span>(ldw_cps_trim, sample <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>) <span class="sc">&amp;</span> ps_assoverlap)</span>
<span id="cb27-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-6" tabindex="-1"></a>ldw_psid.trim_match <span class="ot">&lt;-</span> <span class="fu">subset</span>(ldw_psid_trim, sample <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>) <span class="sc">&amp;</span> ps_assoverlap)</span>
<span id="cb27-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-7" tabindex="-1"></a></span>
<span id="cb27-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-8" tabindex="-1"></a><span class="co"># re-estimate propensity scores and employ 1:1 matching</span></span>
<span id="cb27-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-9" tabindex="-1"></a>ldw_cps.trim_match <span class="ot">&lt;-</span> <span class="fu">psmatch</span>(<span class="at">data =</span> ldw_cps.trim_match, <span class="at">Y =</span> <span class="st">&quot;re78&quot;</span>, <span class="at">treat =</span> <span class="st">&quot;treat&quot;</span>, <span class="at">cov =</span> covar)</span>
<span id="cb27-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-10" tabindex="-1"></a>ldw_psid.trim_match <span class="ot">&lt;-</span> <span class="fu">psmatch</span>(<span class="at">data =</span> ldw_psid.trim_match, <span class="at">Y =</span> <span class="st">&quot;re78&quot;</span>, <span class="at">treat =</span> <span class="st">&quot;treat&quot;</span>, <span class="at">cov =</span> covar)</span>
<span id="cb27-11"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-11" tabindex="-1"></a></span>
<span id="cb27-12"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-12" tabindex="-1"></a><span class="co"># further subset data and re-assign treat variable </span></span>
<span id="cb27-13"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-13" tabindex="-1"></a>ldw_trim_cps <span class="ot">&lt;-</span> <span class="fu">subset</span>(ldw_cps_trim, sample <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">&amp;</span> ps_assoverlap <span class="sc">&lt;=</span> <span class="fl">0.9</span>)</span>
<span id="cb27-14"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-14" tabindex="-1"></a>ldw_trim_cps<span class="sc">$</span>treat[<span class="fu">which</span>(ldw_trim_cps<span class="sc">$</span>sample <span class="sc">==</span> <span class="dv">2</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb27-15"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-15" tabindex="-1"></a></span>
<span id="cb27-16"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-16" tabindex="-1"></a>ldw_trim_psid <span class="ot">&lt;-</span> <span class="fu">subset</span>(ldw_psid_trim, sample <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">&amp;</span> ps_assoverlap <span class="sc">&lt;=</span> <span class="fl">0.8</span>)</span>
<span id="cb27-17"><a href="lalonde-dehejia-wahba-ldw-data.html#cb27-17" tabindex="-1"></a>ldw_trim_psid<span class="sc">$</span>treat[<span class="fu">which</span>(ldw_trim_psid<span class="sc">$</span>sample <span class="sc">==</span> <span class="dv">2</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-1" tabindex="-1"></a>all_trim.cps  <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-2" tabindex="-1"></a>  <span class="at">ps_threshold =</span> ldw_cps.ps_trim, </span>
<span id="cb28-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-3" tabindex="-1"></a>  <span class="at">common_range =</span> ldw_cps.ps_common, </span>
<span id="cb28-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-4" tabindex="-1"></a>  <span class="at">stuermer =</span> ldw_cps.ps_stuermer, </span>
<span id="cb28-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-5" tabindex="-1"></a>  <span class="at">walker =</span> ldw_cps.ps_walker, </span>
<span id="cb28-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-6" tabindex="-1"></a>  <span class="at">crump =</span> ldw_cps.ps_crump)</span>
<span id="cb28-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-8" tabindex="-1"></a>all_trim.psid  <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb28-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-9" tabindex="-1"></a>  <span class="at">ps_threshold =</span> ldw_psid.ps_trim, </span>
<span id="cb28-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-10" tabindex="-1"></a>  <span class="at">common_range =</span> ldw_psid.ps_common, </span>
<span id="cb28-11"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-11" tabindex="-1"></a>  <span class="at">stuermer =</span> ldw_psid.ps_stuermer, </span>
<span id="cb28-12"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-12" tabindex="-1"></a>  <span class="at">walker =</span> ldw_psid.ps_walker, </span>
<span id="cb28-13"><a href="lalonde-dehejia-wahba-ldw-data.html#cb28-13" tabindex="-1"></a>  <span class="at">crump =</span> ldw_psid.ps_crump)</span></code></pre></div>
</div>
<div id="initial-datasets" class="section level5 hasAnchor" number="1.4.2.1.2">
<h5><span class="header-section-number">1.4.2.1.2</span> Initial datasets<a href="lalonde-dehejia-wahba-ldw-data.html#initial-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div id="distance-matching" class="section level6 hasAnchor" number="1.4.2.1.2.1">
<h6><span class="header-section-number">1.4.2.1.2.1</span> Distance matching<a href="lalonde-dehejia-wahba-ldw-data.html#distance-matching" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<ol style="list-style-type: decimal">
<li>1:1 Nearest neighbor matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb29-1" tabindex="-1"></a><span class="co"># perform nearest neighbor matching with k=1, logistic propensity score and replacement</span></span>
<span id="cb29-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb29-2" tabindex="-1"></a>nn_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb29-3" tabindex="-1"></a>nn_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb29-4" tabindex="-1"></a></span>
<span id="cb29-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb29-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(nn_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb31-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(nn_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb33-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span> <span class="fu">bal.tab</span>(nn_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb33-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb33-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb33-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb33-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb33-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb33-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb33-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb33-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb33-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb33-6" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.0002916864 -0.0113320563 -0.0430141872 -0.0108108108 -0.0054054054
##  [6] -0.0108108108  0.0108108108 -0.1134446902 -0.0767658632  0.0108108108
## [11]  0.0432432432</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span> <span class="fu">bal.tab</span>(nn_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb35-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb35-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb35-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb35-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb35-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-6" tabindex="-1"></a></span>
<span id="cb35-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb35-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.002286931  0.350471405 -0.246647484 -0.006211180  0.031055901
##  [6]  0.086956522  0.105590062 -0.169851039 -0.285231720  0.062111801
## [11]  0.136645963</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>k:1 matching (k=2) with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb37-1" tabindex="-1"></a><span class="co"># perform nearest neighbor matching with k=2, logistic propensity score and replacement</span></span>
<span id="cb37-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb37-2" tabindex="-1"></a>k<span class="ot">&lt;-</span><span class="dv">2</span></span>
<span id="cb37-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb37-3" tabindex="-1"></a>k2_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">ratio =</span> k, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb37-4" tabindex="-1"></a>k2_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">ratio =</span> k, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb37-5" tabindex="-1"></a></span>
<span id="cb37-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb37-6" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(k2_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb39-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(k2_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(k2_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb41-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb41-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb41-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb41-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb41-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-6" tabindex="-1"></a></span>
<span id="cb41-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb41-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.0004841974  0.0207754365 -0.1196332081 -0.0135135135  0.0054054054
##  [6]  0.0216216216  0.0540540541 -0.0726208913 -0.0417687276  0.0108108108
## [11]  0.0378378378</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(k2_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb43-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb43-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb43-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb43-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb43-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-6" tabindex="-1"></a></span>
<span id="cb43-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb43-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.003622634  0.286828588 -0.147386911 -0.018633540  0.018633540
##  [6]  0.074534161  0.086956522 -0.169816889 -0.144049001  0.077639752
## [11]  0.074534161</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>k:1 matching (k=3) with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb45-1" tabindex="-1"></a><span class="co"># perform nearest neighbor matching with k=3, logistic propensity score and replacement</span></span>
<span id="cb45-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb45-2" tabindex="-1"></a>k<span class="ot">&lt;-</span><span class="dv">3</span></span>
<span id="cb45-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb45-3" tabindex="-1"></a>k3_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">ratio =</span> k, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb45-4" tabindex="-1"></a>k3_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">ratio =</span> k, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb45-5" tabindex="-1"></a></span>
<span id="cb45-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb45-6" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(k3_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb47-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(k3_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb49-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(k3_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb49-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb49-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb49-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb49-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb49-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb49-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb49-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb49-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb49-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb49-6" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.0003286797  0.0994702718 -0.1254580459 -0.0144144144  0.0090090090
##  [6]  0.0288288288  0.0612612613 -0.0514340070 -0.0114861859  0.0216216216
## [11]  0.0468468468</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(k3_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb51-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb51-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb51-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb51-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb51-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-6" tabindex="-1"></a></span>
<span id="cb51-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb51-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.005770912  0.280144639 -0.061160555 -0.033126294  0.026915114
##  [6]  0.078674948  0.053830228 -0.164892321 -0.116202224  0.091097308
## [11]  0.055900621</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Caliper matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb53-1" tabindex="-1"></a><span class="co"># perform nearest neighbor matching with a caliper of 0.1 on the logistic propensity score </span></span>
<span id="cb53-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb53-2" tabindex="-1"></a>caliper_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">caliper =</span> <span class="fl">0.1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb53-3" tabindex="-1"></a>caliper_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">caliper =</span> <span class="fl">0.1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb53-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(caliper_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb55-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(caliper_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb57-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(caliper_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb57-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb57-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb57-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb57-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb57-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb57-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb57-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb57-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb57-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb57-6" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.0001395963 -0.0293423041 -0.0357213813 -0.0110497238 -0.0055248619
##  [6] -0.0110497238  0.0110497238 -0.1159517552 -0.0759374331  0.0110497238
## [11]  0.0386740331</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(caliper_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb59-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb59-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb59-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb59-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb59-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-6" tabindex="-1"></a></span>
<span id="cb59-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb59-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.0005330485  0.2981431493 -0.2050199578 -0.0364963504  0.0145985401
##  [6]  0.0656934307  0.0656934307 -0.1848659241 -0.1731015888  0.0948905109
## [11]  0.0802919708</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Common support restriction matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb61-1" tabindex="-1"></a><span class="co"># perform nearest neighbor matching with exclusion of units outside common support</span></span>
<span id="cb61-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb61-2" tabindex="-1"></a>cs_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">discard =</span> <span class="st">&quot;both&quot;</span>, <span class="at">reestimate =</span> <span class="cn">TRUE</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb61-3" tabindex="-1"></a>cs_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">discard =</span> <span class="st">&quot;both&quot;</span>, <span class="at">reestimate =</span> <span class="cn">TRUE</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb61-4" tabindex="-1"></a></span>
<span id="cb61-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb61-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(cs_trim_comb.cps[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb63-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(cs_trim_comb.psid[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(cs_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb65-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb65-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb65-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb65-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb65-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-6" tabindex="-1"></a></span>
<span id="cb65-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb65-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.0001878909 -0.0687478081 -0.2285128694 -0.0216216216  0.0162162162
##  [6]  0.0324324324  0.1081081081 -0.0248358187  0.0332877981  0.0054054054
## [11]  0.0378378378</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(cs_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb67-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb67-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb67-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb67-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb67-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-6" tabindex="-1"></a></span>
<span id="cb67-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb67-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.002392401  0.428195761 -0.260525688  0.000000000  0.025316456
##  [6]  0.101265823  0.107594937 -0.185376674 -0.345199002  0.075949367
## [11]  0.158227848</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Mahalanobis distance matching (mahvars) with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb69-1" tabindex="-1"></a><span class="co"># perform nearest neighbor matching using mahalanobis distance</span></span>
<span id="cb69-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb69-2" tabindex="-1"></a>mahvars_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;mahalanobis&quot;</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb69-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb69-3" tabindex="-1"></a>mahvars_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;nearest&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;mahalanobis&quot;</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb69-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb69-4" tabindex="-1"></a></span>
<span id="cb69-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb69-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(mahvars_trim_comb.cps[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;      
## [17] &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb71-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(mahvars_trim_comb.psid[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;      
## [17] &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(mahvars_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb73-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb73-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb73-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb73-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb73-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-6" tabindex="-1"></a></span>
<span id="cb73-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb73-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.16015973 -0.15861482  0.00000000  0.00000000 -0.09729730  0.08648649
##  [7] -0.09637309 -0.16710243  0.02702703  0.02702703</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(mahvars_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb75-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb75-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb75-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb75-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb75-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-6" tabindex="-1"></a></span>
<span id="cb75-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb75-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.70878919 -0.12031585  0.21118012  0.00000000 -0.22981366  0.07453416
##  [7] -0.53871439 -1.11890793  0.13664596  0.13664596</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Optimal pair matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb77-1" tabindex="-1"></a><span class="co"># perform optimal pair matching that minimizes total within-pair distance on propensity scores</span></span>
<span id="cb77-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb77-2" tabindex="-1"></a>optimal_pair_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;optimal&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb77-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb77-3" tabindex="-1"></a>optimal_pair_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;optimal&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb77-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb77-4" tabindex="-1"></a></span>
<span id="cb77-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb77-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(optimal_pair_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb79-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(optimal_pair_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(optimal_pair_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb81-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb81-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb81-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb81-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb81-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-6" tabindex="-1"></a></span>
<span id="cb81-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb81-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.083293194 -0.151849554 -0.080651601 -0.005405405  0.005405405
##  [6]  0.000000000  0.075675676 -0.007883418  0.018281309  0.005405405
## [11]  0.054054054</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(optimal_pair_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb83-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb83-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb83-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb83-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb83-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-6" tabindex="-1"></a></span>
<span id="cb83-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb83-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  1.228568272 -0.430678791  0.003007896  0.086956522  0.000000000
##  [6] -0.267080745  0.043478261 -0.451694717 -0.411432783  0.279503106
## [11]  0.167701863</code></pre>
<ol start="8" style="list-style-type: decimal">
<li>Optimal full matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb85-1" tabindex="-1"></a><span class="co"># perform optimal full matching allowing sets with varying ratios of treated to controls and minimizing a global distance criterion</span></span>
<span id="cb85-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb85-2" tabindex="-1"></a>optimal_full_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;full&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb85-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb85-3" tabindex="-1"></a>optimal_full_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;full&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb85-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb85-4" tabindex="-1"></a></span>
<span id="cb85-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb85-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(optimal_full_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb87-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(optimal_full_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(optimal_full_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb89-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb89-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb89-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb89-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb89-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-6" tabindex="-1"></a></span>
<span id="cb89-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb89-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.0004211628 -0.0008219281 -0.1251411402 -0.0083743533  0.0081288768
##  [6]  0.0203142168  0.0571349507 -0.0324191189 -0.0011120886  0.0065665683
## [11]  0.0247902260</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(optimal_full_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb91-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb91-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb91-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb91-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb91-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-6" tabindex="-1"></a></span>
<span id="cb91-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb91-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.002514483  0.300935391 -0.113841275  0.002619784  0.024647968
##  [6]  0.087701069  0.099496438 -0.164705334 -0.295531459  0.051797617
## [11]  0.134374128</code></pre>
<ol start="9" style="list-style-type: decimal">
<li>Generalized full matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb93-1" tabindex="-1"></a><span class="co"># perform generalized full matching using fast approximation and producing matched sets with flexible treated/control ratios </span></span>
<span id="cb93-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb93-2" tabindex="-1"></a>general_full_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;quick&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb93-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb93-3" tabindex="-1"></a>general_full_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;quick&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb93-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb93-4" tabindex="-1"></a></span>
<span id="cb93-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb93-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(general_full_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb95-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(general_full_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(general_full_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb97-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb97-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb97-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb97-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb97-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-6" tabindex="-1"></a></span>
<span id="cb97-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb97-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.001068543 -0.024267937 -0.138828121 -0.011364898  0.005724407
##  [6]  0.002140818  0.049043884 -0.028461298 -0.020723582  0.002329407
## [11]  0.025472237</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(general_full_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb99-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb99-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb99-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb99-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb99-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-6" tabindex="-1"></a></span>
<span id="cb99-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb99-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.005692269  0.259796436 -0.200938810  0.001338319  0.024298636
##  [6]  0.088996249  0.118052748 -0.142382862 -0.218993310  0.048555876
## [11]  0.112294368</code></pre>
<ol start="10" style="list-style-type: decimal">
<li>Genetic matching with 1) propensity threshold 2) common range 3) stuermer 4) walker 5) crump trimming</li>
</ol>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb101-1" tabindex="-1"></a><span class="co"># perform genetic matching </span></span>
<span id="cb101-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb101-2" tabindex="-1"></a>genetic_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;genetic&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">pop.size =</span> <span class="dv">100</span>)</span>
<span id="cb101-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb101-3" tabindex="-1"></a>genetic_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;genetic&quot;</span>, <span class="at">distance =</span> <span class="st">&quot;glm&quot;</span>, <span class="at">link =</span> <span class="st">&quot;logit&quot;</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">pop.size =</span> <span class="dv">100</span>)</span>
<span id="cb101-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb101-4" tabindex="-1"></a></span>
<span id="cb101-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb101-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(genetic_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb103-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(genetic_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(genetic_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb105-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb105-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb105-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb105-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb105-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-6" tabindex="-1"></a></span>
<span id="cb105-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb105-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  7.559222e-03  1.586488e-02 -2.957225e-02  0.000000e+00  6.938894e-18
##  [6]  2.775558e-17  0.000000e+00  1.767089e-02 -1.571780e-02  0.000000e+00
## [11]  0.000000e+00</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(genetic_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb107-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb107-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb107-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb107-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb107-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-6" tabindex="-1"></a></span>
<span id="cb107-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb107-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  1.930063e-01 -1.891848e-01  1.022685e-01 -1.242236e-02  0.000000e+00
##  [6]  0.000000e+00  6.211180e-03 -1.621253e-02 -4.028517e-02  1.110223e-16
## [11] -6.211180e-02</code></pre>
</div>
<div id="stratum-matching" class="section level6 hasAnchor" number="1.4.2.1.2.2">
<h6><span class="header-section-number">1.4.2.1.2.2</span> Stratum matching<a href="lalonde-dehejia-wahba-ldw-data.html#stratum-matching" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<ol start="11" style="list-style-type: decimal">
<li>Exact matching (exact)</li>
</ol>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb109-1" tabindex="-1"></a><span class="co"># match units exactly by raw covariate profiles </span></span>
<span id="cb109-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb109-2" tabindex="-1"></a>exact_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;exact&quot;</span>)</span>
<span id="cb109-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb109-3" tabindex="-1"></a>exact_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;exact&quot;</span>)</span>
<span id="cb109-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb109-4" tabindex="-1"></a></span>
<span id="cb109-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb109-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(exact_trim_comb.cps[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;      
## [17] &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb111-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(exact_trim_comb.psid[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;      
## [17] &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(exact_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb113-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb113-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb113-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb113-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb113-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-6" tabindex="-1"></a></span>
<span id="cb113-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb113-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.000000e+00 -1.776357e-15  0.000000e+00  0.000000e+00  0.000000e+00
##  [6]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(exact_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb115-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb115-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb115-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb115-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb115-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-6" tabindex="-1"></a></span>
<span id="cb115-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb115-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] 3.552714e-15 1.776357e-15 1.110223e-16 0.000000e+00 0.000000e+00
##  [6] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</code></pre>
<ol start="12" style="list-style-type: decimal">
<li>Coarsened matching (cem)</li>
</ol>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb117-1" tabindex="-1"></a><span class="co"># match units exactly within coarse strata </span></span>
<span id="cb117-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb117-2" tabindex="-1"></a>cem_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;cem&quot;</span>)</span>
<span id="cb117-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb117-3" tabindex="-1"></a>cem_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;cem&quot;</span>)</span>
<span id="cb117-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb117-4" tabindex="-1"></a></span>
<span id="cb117-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb117-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(cem_trim_comb.cps[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;      
## [17] &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb119-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(cem_trim_comb.psid[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;      
## [17] &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(cem_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb121-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb121-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb121-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb121-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb121-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-6" tabindex="-1"></a></span>
<span id="cb121-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb121-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  2.364587e-02 -1.915884e-03 -1.110223e-16  0.000000e+00  0.000000e+00
##  [6]  0.000000e+00  5.763641e-03 -2.422462e-02  0.000000e+00  0.000000e+00</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(cem_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb123-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb123-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb123-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb123-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb123-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-6" tabindex="-1"></a></span>
<span id="cb123-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb123-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  2.082509e-02 -2.753699e-02  1.110223e-16  0.000000e+00  0.000000e+00
##  [6]  1.110223e-16 -1.832720e-01 -6.009392e-01  0.000000e+00  0.000000e+00</code></pre>
<ol start="13" style="list-style-type: decimal">
<li>Subclassification</li>
</ol>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb125-1" tabindex="-1"></a><span class="co"># partition sample into fixed number of bins based on propensity score </span></span>
<span id="cb125-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb125-2" tabindex="-1"></a>subcl_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;subclass&quot;</span>, <span class="at">subclass =</span> <span class="dv">5</span>)</span>
<span id="cb125-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb125-3" tabindex="-1"></a>subcl_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;subclass&quot;</span>, <span class="at">subclass =</span> <span class="dv">5</span>)</span>
<span id="cb125-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb125-4" tabindex="-1"></a></span>
<span id="cb125-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb125-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(subcl_trim_comb.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;distance&quot;     
## [17] &quot;weights&quot;       &quot;subclass&quot;</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb127-1" tabindex="-1"></a><span class="fu">names</span>((subcl_trim_comb.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;subclass&quot;  &quot;weights&quot;   &quot;X&quot;         &quot;call&quot;      &quot;info&quot;      &quot;estimand&quot; 
##  [7] &quot;formula&quot;   &quot;treat&quot;     &quot;distance&quot;  &quot;discarded&quot; &quot;q.cut&quot;     &quot;model&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(subcl_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb129-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb129-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb129-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb129-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb129-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-6" tabindex="-1"></a></span>
<span id="cb129-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb129-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.04632267 -0.17493174 -0.08847568  0.06641796  0.01101620 -0.07205548
##  [7]  0.06220294 -0.35108177 -0.55099510  0.06250574  0.06368869</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(subcl_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb131-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb131-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb131-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb131-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb131-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-6" tabindex="-1"></a></span>
<span id="cb131-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb131-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1]  0.11207335  0.17160382 -0.25541094  0.09115047  0.01257692  0.02829723
##  [7]  0.13773040 -0.70859203 -1.06239070  0.13840392  0.20242264</code></pre>
</div>
<div id="pure-subset-selection" class="section level6 hasAnchor" number="1.4.2.1.2.3">
<h6><span class="header-section-number">1.4.2.1.2.3</span> Pure subset selection<a href="lalonde-dehejia-wahba-ldw-data.html#pure-subset-selection" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<ol start="14" style="list-style-type: decimal">
<li>Cardinality profile matching</li>
</ol>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb133-1" tabindex="-1"></a><span class="co"># select largest balanced subsample meeting covariate balance tolerances and a fixed ratio of controls to treated units</span></span>
<span id="cb133-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb133-2" tabindex="-1"></a>card_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;cardinality&quot;</span>, <span class="at">tols =</span> <span class="fl">0.1</span>, <span class="at">ratio =</span> <span class="dv">1</span>, <span class="at">time =</span> <span class="dv">1200</span>)</span>
<span id="cb133-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb133-3" tabindex="-1"></a>card_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;cardinality&quot;</span>, <span class="at">tols =</span> <span class="fl">0.1</span>, <span class="at">ratio =</span> <span class="dv">1</span>, <span class="at">time =</span> <span class="dv">1200</span>)</span>
<span id="cb133-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb133-4" tabindex="-1"></a></span>
<span id="cb133-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb133-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(card_trim_comb.cps[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb135-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(card_trim_comb.psid[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(card_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb137-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb137-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb137-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb137-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb137-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-6" tabindex="-1"></a></span>
<span id="cb137-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb137-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.095189273  0.005376773  0.032432432  0.021621622 -0.037837838
##  [6]  0.043243243 -0.093022492 -0.099933959  0.043243243  0.043243243</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(card_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb139-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb139-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb139-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb139-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb139-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-6" tabindex="-1"></a></span>
<span id="cb139-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb139-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.09900599 -0.08215316  0.03571429  0.01785714 -0.03571429  0.04464286
##  [7] -0.04356946 -0.09960598  0.04464286 -0.04464286</code></pre>
<ol start="15" style="list-style-type: decimal">
<li>Profile matching</li>
</ol>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb141-1" tabindex="-1"></a><span class="co"># select the largest control group subset balanced to the treated group (for ATT), leaving the treated group intact</span></span>
<span id="cb141-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb141-2" tabindex="-1"></a>profile_trim_comb.cps <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model, <span class="at">data_list =</span> all_trim.cps, <span class="at">method =</span> <span class="st">&quot;cardinality&quot;</span>, <span class="at">estimand =</span> <span class="st">&quot;ATT&quot;</span>, <span class="at">tols =</span> <span class="fl">0.1</span>, <span class="at">ratio =</span> <span class="cn">NA</span>, <span class="at">time =</span> <span class="dv">1200</span>)</span>
<span id="cb141-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb141-3" tabindex="-1"></a>profile_trim_comb.psid <span class="ot">&lt;-</span> <span class="fu">attach_matchit</span>(model,<span class="at">data_list =</span> all_trim.psid, <span class="at">method =</span> <span class="st">&quot;cardinality&quot;</span>, <span class="at">estimand =</span> <span class="st">&quot;ATT&quot;</span>, <span class="at">tols =</span> <span class="fl">0.1</span>, <span class="at">ratio =</span> <span class="cn">NA</span>, <span class="at">time =</span> <span class="dv">1200</span>)</span>
<span id="cb141-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb141-4" tabindex="-1"></a></span>
<span id="cb141-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb141-5" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(profile_trim_comb.cps[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb143-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">match.data</span>(profile_trim_comb.psid[[<span class="dv">1</span>]], <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]]))</span></code></pre></div>
<pre><code>##  [1] &quot;data_id&quot;       &quot;treat&quot;         &quot;age&quot;           &quot;education&quot;    
##  [5] &quot;black&quot;         &quot;hispanic&quot;      &quot;married&quot;       &quot;nodegree&quot;     
##  [9] &quot;re74&quot;          &quot;re75&quot;          &quot;re78&quot;          &quot;u74&quot;          
## [13] &quot;u75&quot;           &quot;sample&quot;        &quot;ps_assoverlap&quot; &quot;weights&quot;</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(profile_trim_comb.cps[[<span class="dv">1</span>]], </span>
<span id="cb145-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.cps[[<span class="dv">1</span>]], </span>
<span id="cb145-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb145-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb145-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb145-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-6" tabindex="-1"></a></span>
<span id="cb145-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb145-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.09956021 -0.08372404  0.03467181  0.02231660 -0.03652510  0.04525097
##  [7] -0.02987200 -0.09937107  0.04525097  0.04857143</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-1" tabindex="-1"></a>bal<span class="ot">&lt;-</span><span class="fu">bal.tab</span>(profile_trim_comb.psid[[<span class="dv">1</span>]], </span>
<span id="cb147-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-2" tabindex="-1"></a>        <span class="at">data =</span> all_trim.psid[[<span class="dv">1</span>]], </span>
<span id="cb147-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-3" tabindex="-1"></a>        <span class="at">stats =</span> <span class="st">&quot;mean.diffs&quot;</span>, </span>
<span id="cb147-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-4" tabindex="-1"></a>        <span class="at">un =</span> <span class="cn">TRUE</span>, </span>
<span id="cb147-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-5" tabindex="-1"></a>        <span class="at">s.d.denom =</span> <span class="st">&quot;treated&quot;</span>)</span>
<span id="cb147-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-6" tabindex="-1"></a></span>
<span id="cb147-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb147-7" tabindex="-1"></a>bal<span class="sc">$</span>Balance<span class="sc">$</span>Diff.Adj</span></code></pre></div>
<pre><code>##  [1] -0.09626508  0.07470775  0.02917810  0.02181135 -0.03842265  0.01343348
##  [7]  0.05494433 -0.04393793  0.03668930 -0.01776686</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="assessing-methods" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Assessing methods<a href="lalonde-dehejia-wahba-ldw-data.html#assessing-methods" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We now systematically reassess all methods described above by evaluating the overlap coefficient (OVL) and the absolute standardized mean differences (ASMD). Specifically, we compute the ASMD and OVL for each approach and compute a composite score to determine the best performing methods.</p>
<div id="single-methods-1" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Single methods<a href="lalonde-dehejia-wahba-ldw-data.html#single-methods-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="trimming-1" class="section level4 hasAnchor" number="1.5.1.1">
<h4><span class="header-section-number">1.5.1.1</span> Trimming<a href="lalonde-dehejia-wahba-ldw-data.html#trimming-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="smd" class="section level5 hasAnchor" number="1.5.1.1.1">
<h5><span class="header-section-number">1.5.1.1.1</span> SMD<a href="lalonde-dehejia-wahba-ldw-data.html#smd" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb149-1" tabindex="-1"></a><span class="co"># compute absolute SMD</span></span>
<span id="cb149-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb149-2" tabindex="-1"></a>smd_trim.cps <span class="ot">&lt;-</span> <span class="fu">compute_abs_smd_trim</span>(all_trim.cps, <span class="st">&quot;treat&quot;</span>, covar)</span>
<span id="cb149-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb149-3" tabindex="-1"></a>smd_trim.psid <span class="ot">&lt;-</span> <span class="fu">compute_abs_smd_trim</span>(all_trim.psid, <span class="st">&quot;treat&quot;</span>, covar)</span></code></pre></div>
</div>
<div id="ovl" class="section level5 hasAnchor" number="1.5.1.1.2">
<h5><span class="header-section-number">1.5.1.1.2</span> OVL<a href="lalonde-dehejia-wahba-ldw-data.html#ovl" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb150-1" tabindex="-1"></a><span class="co"># compute overlap coefficients</span></span>
<span id="cb150-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb150-2" tabindex="-1"></a>ovl_trim.cps <span class="ot">&lt;-</span> <span class="fu">compute_ovl_trim</span>(all_trim.cps, <span class="st">&quot;ps_assoverlap&quot;</span>, <span class="st">&quot;treat&quot;</span>)</span>
<span id="cb150-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb150-3" tabindex="-1"></a>ovl_trim.psid <span class="ot">&lt;-</span> <span class="fu">compute_ovl_trim</span>(all_trim.psid, <span class="st">&quot;ps_assoverlap&quot;</span>, <span class="st">&quot;treat&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="integrated-methods-1" class="section level3 hasAnchor" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Integrated methods<a href="lalonde-dehejia-wahba-ldw-data.html#integrated-methods-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="trimming-and-matching-1" class="section level4 hasAnchor" number="1.5.2.1">
<h4><span class="header-section-number">1.5.2.1</span> Trimming and matching<a href="lalonde-dehejia-wahba-ldw-data.html#trimming-and-matching-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="extended-datasets" class="section level5 hasAnchor" number="1.5.2.1.1">
<h5><span class="header-section-number">1.5.2.1.1</span> Extended datasets<a href="lalonde-dehejia-wahba-ldw-data.html#extended-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>(Similar to tutorial by <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>)</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb151-1" tabindex="-1"></a><span class="co"># list all trimmed and matched samples</span></span>
<span id="cb151-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb151-2" tabindex="-1"></a>trim_match_comb.cps_plus <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ps_threshold_match =</span> ldw_cps.trim_match)</span>
<span id="cb151-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb151-3" tabindex="-1"></a>trim_match_comb.psid_plus <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ps_threshold_match =</span> ldw_psid.trim_match)</span></code></pre></div>
<div id="smd-1" class="section level6 hasAnchor" number="1.5.2.1.1.1">
<h6><span class="header-section-number">1.5.2.1.1.1</span> SMD<a href="lalonde-dehejia-wahba-ldw-data.html#smd-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb152-1" tabindex="-1"></a><span class="co"># compute absolute SMD</span></span>
<span id="cb152-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb152-2" tabindex="-1"></a>smd_trim_match_comb.cps_plus <span class="ot">&lt;-</span> <span class="fu">compute_abs_smd_trim</span>(trim_match_comb.cps_plus, <span class="st">&quot;treat&quot;</span>, covar)</span>
<span id="cb152-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb152-3" tabindex="-1"></a>smd_trim_match_comb.psid_plus <span class="ot">&lt;-</span> <span class="fu">compute_abs_smd_trim</span>(trim_match_comb.psid_plus, <span class="st">&quot;treat&quot;</span>, covar)</span></code></pre></div>
</div>
<div id="ovl-1" class="section level6 hasAnchor" number="1.5.2.1.1.2">
<h6><span class="header-section-number">1.5.2.1.1.2</span> OVL<a href="lalonde-dehejia-wahba-ldw-data.html#ovl-1" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb153-1" tabindex="-1"></a><span class="co"># compute overlap coefficients</span></span>
<span id="cb153-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb153-2" tabindex="-1"></a>ovl_trim_match_comb.cps_plus <span class="ot">&lt;-</span> <span class="fu">compute_ovl_trim</span>(trim_match_comb.cps_plus, <span class="st">&quot;ps_assoverlap&quot;</span>, <span class="st">&quot;treat&quot;</span>)</span>
<span id="cb153-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb153-3" tabindex="-1"></a>ovl_trim_match_comb.psid_plus <span class="ot">&lt;-</span> <span class="fu">compute_ovl_trim</span>(trim_match_comb.psid_plus, <span class="st">&quot;ps_assoverlap&quot;</span>, <span class="st">&quot;treat&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="initial-datasets-1" class="section level5 hasAnchor" number="1.5.2.1.2">
<h5><span class="header-section-number">1.5.2.1.2</span> Initial datasets<a href="lalonde-dehejia-wahba-ldw-data.html#initial-datasets-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-1" tabindex="-1"></a><span class="co"># list all trimmed and matched samples</span></span>
<span id="cb154-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-2" tabindex="-1"></a>trim_match_comb.cps <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb154-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-3" tabindex="-1"></a>  <span class="at">nn =</span> nn_trim_comb.cps, </span>
<span id="cb154-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-4" tabindex="-1"></a>  <span class="at">k2 =</span> k2_trim_comb.cps,</span>
<span id="cb154-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-5" tabindex="-1"></a>  <span class="at">k3 =</span> k3_trim_comb.cps, </span>
<span id="cb154-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-6" tabindex="-1"></a>  <span class="at">caliper =</span> caliper_trim_comb.cps,</span>
<span id="cb154-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-7" tabindex="-1"></a>  <span class="at">cs =</span> cs_trim_comb.cps, </span>
<span id="cb154-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-8" tabindex="-1"></a>  <span class="at">mahvars =</span> mahvars_trim_comb.cps,</span>
<span id="cb154-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-9" tabindex="-1"></a>  <span class="at">optimal_pair =</span> optimal_pair_trim_comb.cps,</span>
<span id="cb154-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-10" tabindex="-1"></a>  <span class="at">optimal_full =</span> optimal_full_trim_comb.cps, </span>
<span id="cb154-11"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-11" tabindex="-1"></a>  <span class="at">genetic =</span> genetic_trim_comb.cps, </span>
<span id="cb154-12"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-12" tabindex="-1"></a>  <span class="at">exact =</span> exact_trim_comb.cps,</span>
<span id="cb154-13"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-13" tabindex="-1"></a>  <span class="at">cem =</span> cem_trim_comb.cps,</span>
<span id="cb154-14"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-14" tabindex="-1"></a>  <span class="at">subcl =</span> subcl_trim_comb.cps </span>
<span id="cb154-15"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-15" tabindex="-1"></a>)</span>
<span id="cb154-16"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-16" tabindex="-1"></a></span>
<span id="cb154-17"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-17" tabindex="-1"></a>trim_match_comb.psid <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb154-18"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-18" tabindex="-1"></a>  <span class="at">nn =</span> nn_trim_comb.psid,</span>
<span id="cb154-19"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-19" tabindex="-1"></a>  <span class="at">k2 =</span> k2_trim_comb.psid, </span>
<span id="cb154-20"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-20" tabindex="-1"></a>  <span class="at">k3 =</span> k3_trim_comb.psid, </span>
<span id="cb154-21"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-21" tabindex="-1"></a>  <span class="at">caliper =</span> caliper_trim_comb.psid, </span>
<span id="cb154-22"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-22" tabindex="-1"></a>  <span class="at">cs =</span> cs_trim_comb.psid,</span>
<span id="cb154-23"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-23" tabindex="-1"></a>  <span class="at">mahvars =</span> mahvars_trim_comb.psid,</span>
<span id="cb154-24"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-24" tabindex="-1"></a>  <span class="at">optimal_pair =</span> optimal_pair_trim_comb.psid, </span>
<span id="cb154-25"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-25" tabindex="-1"></a>  <span class="at">optimal_full =</span> optimal_full_trim_comb.psid, </span>
<span id="cb154-26"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-26" tabindex="-1"></a>  <span class="at">genetic =</span> genetic_trim_comb.psid,</span>
<span id="cb154-27"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-27" tabindex="-1"></a>  <span class="at">exact =</span> exact_trim_comb.psid,</span>
<span id="cb154-28"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-28" tabindex="-1"></a>  <span class="at">cem =</span> cem_trim_comb.psid,</span>
<span id="cb154-29"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-29" tabindex="-1"></a>  <span class="at">subcl =</span> subcl_trim_comb.psid </span>
<span id="cb154-30"><a href="lalonde-dehejia-wahba-ldw-data.html#cb154-30" tabindex="-1"></a>)</span></code></pre></div>
<div id="smd-2" class="section level6 hasAnchor" number="1.5.2.1.2.1">
<h6><span class="header-section-number">1.5.2.1.2.1</span> SMD<a href="lalonde-dehejia-wahba-ldw-data.html#smd-2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb155-1" tabindex="-1"></a><span class="co"># compute absolute SMD</span></span>
<span id="cb155-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb155-2" tabindex="-1"></a>smd_trim_match_comb.cps <span class="ot">&lt;-</span> <span class="fu">compute_abs_smd_matchit</span>(trim_match_comb.cps, all_trim.cps) </span>
<span id="cb155-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb155-3" tabindex="-1"></a>smd_trim_match_comb.psid <span class="ot">&lt;-</span> <span class="fu">compute_abs_smd_matchit</span>(trim_match_comb.psid, all_trim.psid)</span>
<span id="cb155-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb155-4" tabindex="-1"></a></span>
<span id="cb155-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb155-5" tabindex="-1"></a>smd_trim_match_comb.cps</span></code></pre></div>
<pre><code>##          Method MatchIndex Mean_Abs_SMD  Max_Abs_SMD
## 1            nn          1 3.061276e-02 1.134447e-01
## 2            nn          2 3.061276e-02 1.134447e-01
## 3            nn          3 3.719497e-01 1.608865e+00
## 4            nn          4 3.078925e-01 1.324948e+00
## 5            nn          5 3.261488e-02 1.004314e-01
## 6            k2          1 3.622961e-02 1.196332e-01
## 7            k2          2 3.622961e-02 1.196332e-01
## 8            k2          3 1.971272e-01 6.624738e-01
## 9            k2          4 1.929328e-01 8.990715e-01
## 10           k2          5 2.704157e-02 8.427947e-02
## 11           k3          1 4.274174e-02 1.254580e-01
## 12           k3          2 4.274174e-02 1.254580e-01
## 13           k3          3 1.477219e-01 5.993810e-01
## 14           k3          4 2.202962e-01 7.571129e-01
## 15           k3          5 2.589387e-02 9.257439e-02
## 16      caliper          1 3.140821e-02 1.159518e-01
## 17      caliper          2 3.140821e-02 1.159518e-01
## 18      caliper          3 3.017284e-01 1.249236e+00
## 19      caliper          4 2.312749e-01 9.369272e-01
## 20      caliper          5 3.261488e-02 1.004314e-01
## 21           cs          1 5.247216e-02 2.285129e-01
## 22           cs          2 5.247216e-02 2.285129e-01
## 23           cs          3 1.183383e-01 3.643606e-01
## 24           cs          4 1.199312e-01 3.000000e-01
## 25           cs          5 3.119386e-02 8.470343e-02
## 26      mahvars          1 8.200879e-02 1.671024e-01
## 27      mahvars          2 8.200879e-02 1.671024e-01
## 28      mahvars          3 7.180904e-02 4.731955e-01
## 29      mahvars          4 7.180904e-02 4.731955e-01
## 30      mahvars          5 9.614256e-02 2.794858e-01
## 31 optimal_pair          1 4.435500e-02 1.518496e-01
## 32 optimal_pair          2 4.435500e-02 1.518496e-01
## 33 optimal_pair          3 1.367490e-01 4.731955e-01
## 34 optimal_pair          4 1.510551e-01 5.205151e-01
## 35 optimal_pair          5 7.165699e-02 2.253764e-01
## 36 optimal_full          1 2.592951e-02 1.251411e-01
## 37 optimal_full          2 2.592951e-02 1.251411e-01
## 38 optimal_full          3 1.018808e-01 3.883284e-01
## 39 optimal_full          4 1.021585e-01 3.742204e-01
## 40 optimal_full          5 2.830226e-02 9.448477e-02
## 41      genetic          1 7.853186e-03 2.957225e-02
## 42      genetic          2 8.940279e-03 2.957225e-02
## 43      genetic          3 3.917660e-02 2.547540e-01
## 44      genetic          4 3.920415e-02 2.550570e-01
## 45      genetic          5 2.702088e-03 9.773472e-03
## 46        exact          1 1.776357e-16 1.776357e-15
## 47        exact          2 1.776357e-16 1.776357e-15
## 48        exact          5 3.566591e-16 3.552714e-15
## 49          cem          1 5.555001e-03 2.422462e-02
## 50          cem          2 5.555001e-03 2.422462e-02
## 51          cem          3 4.912529e-02 2.602575e-01
## 52          cem          4 4.912529e-02 2.602575e-01
## 53          cem          5 1.430870e-02 5.022776e-02
## 54        subcl          1 1.408813e-01 5.509951e-01
## 55        subcl          2 1.408813e-01 5.509951e-01
## 56        subcl          3 1.112661e-01 2.459871e-01
## 57        subcl          4 1.117927e-01 2.461324e-01
## 58        subcl          5 3.445434e-02 1.886167e-01</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb157-1" tabindex="-1"></a>smd_trim_match_comb.psid</span></code></pre></div>
<pre><code>##          Method MatchIndex Mean_Abs_SMD  Max_Abs_SMD
## 1            nn          1 1.348236e-01 3.504714e-01
## 2            nn          2 1.146343e-01 2.943476e-01
## 3            nn          3 1.083861e-01 2.756888e-01
## 4            nn          4 1.399000e-01 3.481006e-01
## 5            nn          5 1.078783e-01 3.816131e-01
## 6            k2          1 1.002396e-01 2.868286e-01
## 7            k2          2 8.328743e-02 1.977295e-01
## 8            k2          3 2.222205e-01 6.902685e-01
## 9            k2          4 1.010715e-01 3.432732e-01
## 10           k2          5 7.542647e-02 2.694561e-01
## 11           k3          1 8.797411e-02 2.801446e-01
## 12           k3          2 7.753597e-02 2.130899e-01
## 13           k3          3 2.128853e-01 7.158340e-01
## 14           k3          4 1.227078e-01 5.518707e-01
## 15           k3          5 6.589089e-02 2.410678e-01
## 16      caliper          1 1.108480e-01 2.981431e-01
## 17      caliper          2 1.069859e-01 2.848646e-01
## 18      caliper          3 3.549771e-01 1.533930e+00
## 19      caliper          4 1.526716e-01 5.835804e-01
## 20      caliper          5 1.076659e-01 3.840102e-01
## 21           cs          1 1.536404e-01 4.281958e-01
## 22           cs          2 1.172394e-01 2.937601e-01
## 23           cs          3 1.391226e-01 2.500000e-01
## 24           cs          4 1.810905e-01 1.053370e+00
## 25           cs          5 7.836697e-02 2.185048e-01
## 26      mahvars          1 3.275547e-01 1.118908e+00
## 27      mahvars          2 3.184691e-01 1.043257e+00
## 28      mahvars          3 3.436844e-01 1.380537e+00
## 29      mahvars          4 1.583646e-01 5.461920e-01
## 30      mahvars          5 3.345337e-01 8.394438e-01
## 31 optimal_pair          1 3.063730e-01 1.228568e+00
## 32 optimal_pair          2 3.322829e-01 1.295104e+00
## 33 optimal_pair          3 1.257979e-01 3.127652e-01
## 34 optimal_pair          4 9.089509e-02 3.121097e-01
## 35 optimal_pair          5 4.505981e-01 1.720607e+00
## 36 optimal_full          1 1.161968e-01 3.009354e-01
## 37 optimal_full          2 1.103353e-01 2.639413e-01
## 38 optimal_full          3 2.080286e-01 7.902652e-01
## 39 optimal_full          4 9.754673e-02 2.860421e-01
## 40 optimal_full          5 9.373576e-02 2.962179e-01
## 41      genetic          1 5.651842e-02 1.930063e-01
## 42      genetic          2 4.463597e-02 1.525892e-01
## 43      genetic          3 8.251659e-02 3.067860e-01
## 44      genetic          4 7.654620e-02 3.083088e-01
## 45      genetic          5 6.083359e-02 2.849757e-01
## 46        exact          1 5.440093e-16 3.552714e-15
## 47        exact          2 5.398459e-16 3.552714e-15
## 48        exact          5 0.000000e+00 0.000000e+00
## 49          cem          1 8.325733e-02 6.009392e-01
## 50          cem          2 3.097718e-02 1.629897e-01
## 51          cem          4 4.835874e-02 3.511234e-01
## 52          cem          5 2.428539e-02 1.059102e-01
## 53        subcl          1 2.655139e-01 1.062391e+00
## 54        subcl          2 1.558704e-01 4.375556e-01
## 55        subcl          3 2.080286e-01 7.902652e-01
## 56        subcl          4 9.543299e-02 2.669895e-01
## 57        subcl          5 1.176093e-01 2.840819e-01</code></pre>
</div>
<div id="ovl-2" class="section level6 hasAnchor" number="1.5.2.1.2.2">
<h6><span class="header-section-number">1.5.2.1.2.2</span> OVL<a href="lalonde-dehejia-wahba-ldw-data.html#ovl-2" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb159-1" tabindex="-1"></a><span class="co"># compute overlap coefficients</span></span>
<span id="cb159-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb159-2" tabindex="-1"></a>ovl_trim_match_comb.cps <span class="ot">&lt;-</span> <span class="fu">compute_ovl_matchit</span>(trim_match_comb.cps, all_trim.cps, <span class="at">ps =</span> <span class="st">&quot;ps_assoverlap&quot;</span>, <span class="at">treat =</span> <span class="st">&quot;treat&quot;</span>, <span class="at">covar =</span> covar)</span>
<span id="cb159-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb159-3" tabindex="-1"></a>ovl_trim_match_comb.psid <span class="ot">&lt;-</span> <span class="fu">compute_ovl_matchit</span>(trim_match_comb.psid, all_trim.psid, <span class="at">ps =</span> <span class="st">&quot;ps_assoverlap&quot;</span>, <span class="at">treat =</span> <span class="st">&quot;treat&quot;</span>, <span class="at">covar =</span> covar)</span>
<span id="cb159-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb159-4" tabindex="-1"></a></span>
<span id="cb159-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb159-5" tabindex="-1"></a>ovl_trim_match_comb.cps</span></code></pre></div>
<pre><code>##            Method       OVL
## 1            nn_1 0.6523269
## 2            nn_2 0.6523269
## 3            nn_3 0.3023320
## 4            nn_4 0.3588358
## 5            nn_5 0.7649104
## 6            k2_1 0.6173957
## 7            k2_2 0.6173957
## 8            k2_3 0.4022629
## 9            k2_4 0.4347274
## 10           k2_5 0.7680589
## 11           k3_1 0.5810221
## 12           k3_2 0.5810221
## 13           k3_3 0.4200277
## 14           k3_4 0.4301151
## 15           k3_5 0.7095130
## 16      caliper_1 0.6606913
## 17      caliper_2 0.6606913
## 18      caliper_3 0.2584377
## 19      caliper_4 0.3050616
## 20      caliper_5 0.7649104
## 21           cs_1 0.6707672
## 22           cs_2 0.6707672
## 23           cs_3 0.4058607
## 24           cs_4 0.4089050
## 25           cs_5 0.7851201
## 26      mahvars_1 0.7352849
## 27      mahvars_2 0.7352849
## 28      mahvars_3 0.3598906
## 29      mahvars_4 0.3446522
## 30      mahvars_5 0.7594301
## 31 optimal_pair_1 0.7211809
## 32 optimal_pair_2 0.7211809
## 33 optimal_pair_3 0.3957408
## 34 optimal_pair_4 0.4250365
## 35 optimal_pair_5 0.7632107
## 36 optimal_full_1 0.3587450
## 37 optimal_full_2 0.3587450
## 38 optimal_full_3 0.4073559
## 39 optimal_full_4 0.4204927
## 40 optimal_full_5 0.6024890
## 41      genetic_1 0.7466742
## 42      genetic_2 0.7526742
## 43      genetic_3 0.4103108
## 44      genetic_4 0.4246558
## 45      genetic_5 0.8402579
## 46        exact_1 0.4702908
## 47        exact_2 0.4702908
## 48        exact_5 0.3428918
## 49          cem_1 0.4664574
## 50          cem_2 0.4664574
## 51          cem_3 0.3480005
## 52          cem_4 0.3362871
## 53          cem_5 0.6960611
## 54        subcl_1 0.3587450
## 55        subcl_2 0.3587450
## 56        subcl_3 0.4073559
## 57        subcl_4 0.4204927
## 58        subcl_5 0.6024890</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="identifying-best-methods" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Identifying best methods<a href="lalonde-dehejia-wahba-ldw-data.html#identifying-best-methods" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ranking" class="section level3 hasAnchor" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Ranking<a href="lalonde-dehejia-wahba-ldw-data.html#ranking" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To identify the top five methods for each observational dataset, we first combine for each dataset all results of the absolute SMD and OVL into a single data frame. This allows for a comprehensive comparison across all methods.</p>
<div class="callout-note">
<p>Only results based on the non-plus datasets are included in the identification of the best methods, as the objective is to identify the overall best-performing methods for the original observational samples.</p>
</div>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb161-1" tabindex="-1"></a><span class="co"># combine all results</span></span>
<span id="cb161-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb161-2" tabindex="-1"></a>all_cps <span class="ot">&lt;-</span> <span class="fu">combine_results</span>(<span class="st">&quot;cps&quot;</span>)</span>
<span id="cb161-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb161-3" tabindex="-1"></a>all_psid <span class="ot">&lt;-</span> <span class="fu">combine_results</span>(<span class="st">&quot;psid&quot;</span>) </span>
<span id="cb161-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb161-4" tabindex="-1"></a></span>
<span id="cb161-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb161-5" tabindex="-1"></a>all_cps</span></code></pre></div>
<pre><code>##            Method Mean_Abs_SMD  Max_Abs_SMD       OVL
## 1    ps_threshold 4.271568e-02 9.626508e-02 0.3587450
## 2    common_range 4.271568e-02 9.626508e-02 0.3587450
## 3        stuermer 4.271568e-02 9.626508e-02 0.4073559
## 4          walker 4.271568e-02 9.626508e-02 0.4204927
## 5           crump 4.271568e-02 9.626508e-02 0.6024890
## 6            nn_1 3.061276e-02 1.134447e-01 0.6523269
## 7            nn_2 3.061276e-02 1.134447e-01 0.6523269
## 8            nn_3 3.719497e-01 1.608865e+00 0.3023320
## 9            nn_4 3.078925e-01 1.324948e+00 0.3588358
## 10           nn_5 3.261488e-02 1.004314e-01 0.7649104
## 11           k2_1 3.622961e-02 1.196332e-01 0.6173957
## 12           k2_2 3.622961e-02 1.196332e-01 0.6173957
## 13           k2_3 1.971272e-01 6.624738e-01 0.4022629
## 14           k2_4 1.929328e-01 8.990715e-01 0.4347274
## 15           k2_5 2.704157e-02 8.427947e-02 0.7680589
## 16           k3_1 4.274174e-02 1.254580e-01 0.5810221
## 17           k3_2 4.274174e-02 1.254580e-01 0.5810221
## 18           k3_3 1.477219e-01 5.993810e-01 0.4200277
## 19           k3_4 2.202962e-01 7.571129e-01 0.4301151
## 20           k3_5 2.589387e-02 9.257439e-02 0.7095130
## 21      caliper_1 3.140821e-02 1.159518e-01 0.6606913
## 22      caliper_2 3.140821e-02 1.159518e-01 0.6606913
## 23      caliper_3 3.017284e-01 1.249236e+00 0.2584377
## 24      caliper_4 2.312749e-01 9.369272e-01 0.3050616
## 25      caliper_5 3.261488e-02 1.004314e-01 0.7649104
## 26           cs_1 5.247216e-02 2.285129e-01 0.6707672
## 27           cs_2 5.247216e-02 2.285129e-01 0.6707672
## 28           cs_3 1.183383e-01 3.643606e-01 0.4058607
## 29           cs_4 1.199312e-01 3.000000e-01 0.4089050
## 30           cs_5 3.119386e-02 8.470343e-02 0.7851201
## 31      mahvars_1 8.200879e-02 1.671024e-01 0.7352849
## 32      mahvars_2 8.200879e-02 1.671024e-01 0.7352849
## 33      mahvars_3 7.180904e-02 4.731955e-01 0.3598906
## 34      mahvars_4 7.180904e-02 4.731955e-01 0.3446522
## 35      mahvars_5 9.614256e-02 2.794858e-01 0.7594301
## 36 optimal_pair_1 4.435500e-02 1.518496e-01 0.7211809
## 37 optimal_pair_2 4.435500e-02 1.518496e-01 0.7211809
## 38 optimal_pair_3 1.367490e-01 4.731955e-01 0.3957408
## 39 optimal_pair_4 1.510551e-01 5.205151e-01 0.4250365
## 40 optimal_pair_5 7.165699e-02 2.253764e-01 0.7632107
## 41 optimal_full_1 2.592951e-02 1.251411e-01 0.3587450
## 42 optimal_full_2 2.592951e-02 1.251411e-01 0.3587450
## 43 optimal_full_3 1.018808e-01 3.883284e-01 0.4073559
## 44 optimal_full_4 1.021585e-01 3.742204e-01 0.4204927
## 45 optimal_full_5 2.830226e-02 9.448477e-02 0.6024890
## 46      genetic_1 7.853186e-03 2.957225e-02 0.7466742
## 47      genetic_2 8.940279e-03 2.957225e-02 0.7526742
## 48      genetic_3 3.917660e-02 2.547540e-01 0.4103108
## 49      genetic_4 3.920415e-02 2.550570e-01 0.4246558
## 50      genetic_5 2.702088e-03 9.773472e-03 0.8402579
## 51        exact_1 1.776357e-16 1.776357e-15 0.4702908
## 52        exact_2 1.776357e-16 1.776357e-15 0.4702908
## 53        exact_5 3.566591e-16 3.552714e-15 0.3428918
## 54          cem_1 5.555001e-03 2.422462e-02 0.4664574
## 55          cem_2 5.555001e-03 2.422462e-02 0.4664574
## 56          cem_3 4.912529e-02 2.602575e-01 0.3480005
## 57          cem_4 4.912529e-02 2.602575e-01 0.3362871
## 58          cem_5 1.430870e-02 5.022776e-02 0.6960611
## 59        subcl_1 1.408813e-01 5.509951e-01 0.3587450
## 60        subcl_2 1.408813e-01 5.509951e-01 0.3587450
## 61        subcl_3 1.112661e-01 2.459871e-01 0.4073559
## 62        subcl_4 1.117927e-01 2.461324e-01 0.4204927
## 63        subcl_5 3.445434e-02 1.886167e-01 0.6024890</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb163-1" tabindex="-1"></a><span class="co"># save results </span></span>
<span id="cb163-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb163-2" tabindex="-1"></a><span class="fu">save_csv</span>(all_cps, <span class="st">&quot;ldw_model_a_cps1_all_results&quot;</span>)</span>
<span id="cb163-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb163-3" tabindex="-1"></a><span class="fu">save_csv</span>(all_psid, <span class="st">&quot;ldw_model_a_psid1_all_results&quot;</span>)</span></code></pre></div>
<p>Next, each method is evaluated according to its OVL value. The top five methods are then selected based on the highest OVL values, with higher OVL values indicating better overlap between treated and control groups.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-1" tabindex="-1"></a><span class="co"># rank comparatively</span></span>
<span id="cb164-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-2" tabindex="-1"></a>ranked_cps  <span class="ot">&lt;-</span> <span class="fu">assess_methods</span>(all_cps)</span>
<span id="cb164-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-3" tabindex="-1"></a>ranked_psid <span class="ot">&lt;-</span> <span class="fu">assess_methods</span>(all_psid)</span>
<span id="cb164-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-4" tabindex="-1"></a></span>
<span id="cb164-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-5" tabindex="-1"></a><span class="co"># get top 5 methods </span></span>
<span id="cb164-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-6" tabindex="-1"></a>top5_methods.cps <span class="ot">&lt;-</span> <span class="fu">get_top_methods</span>(ranked_cps, <span class="at">top_n =</span> <span class="dv">5</span>)</span>
<span id="cb164-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-7" tabindex="-1"></a>top5_methods.psid <span class="ot">&lt;-</span> <span class="fu">get_top_methods</span>(ranked_psid, <span class="at">top_n =</span> <span class="dv">5</span>)</span>
<span id="cb164-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-8" tabindex="-1"></a></span>
<span id="cb164-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb164-9" tabindex="-1"></a><span class="co"># rerank top 5 methods </span></span></code></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb165-1" tabindex="-1"></a><span class="co"># print results</span></span>
<span id="cb165-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb165-2" tabindex="-1"></a>top5_methods_df.cps <span class="ot">&lt;-</span> ranked_cps <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(OVL)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb165-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb165-3" tabindex="-1"></a>top5_methods_df.psid <span class="ot">&lt;-</span> ranked_psid <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(OVL)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb165-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb165-4" tabindex="-1"></a></span>
<span id="cb165-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb165-5" tabindex="-1"></a><span class="fu">datatable</span>(top5_methods_df.cps, <span class="at">caption =</span> <span class="st">&quot;Top 5 Methods for CPS1&quot;</span>,</span>
<span id="cb165-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb165-6" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">paging =</span> <span class="cn">FALSE</span>, <span class="at">pageLength =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">searching =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-6e8228581aa3e4de6c04" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6e8228581aa3e4de6c04">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 5 Methods for CPS1<\/caption>","data":[["1","2","3","4","5"],["genetic_5","cs_5","k2_5","nn_5","caliper_5"],[0.8402579069980535,0.7851200607261265,0.7680588878225868,0.764910423201294,0.764910423201294]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Method<\/th>\n      <th>OVL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"paging":false,"pageLength":-1,"searching":false,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Method","targets":1},{"name":"OVL","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[-1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb166-1" tabindex="-1"></a><span class="fu">datatable</span>(top5_methods_df.psid, <span class="at">caption =</span> <span class="st">&quot;Top 5 Methods for PSID1&quot;</span>,</span>
<span id="cb166-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb166-2" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">paging =</span> <span class="cn">FALSE</span>, <span class="at">pageLength =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">searching =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-d3a15b670239e029179d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d3a15b670239e029179d">{"x":{"filter":"none","vertical":false,"caption":"<caption>Top 5 Methods for PSID1<\/caption>","data":[["1","2","3","4","5"],["cem_5","exact_2","optimal_pair_3","nn_3","exact_1"],[0.7902632507543826,0.7220896013749803,0.7085603705433973,0.6970892805858474,0.6835823921179321]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Method<\/th>\n      <th>OVL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"paging":false,"pageLength":-1,"searching":false,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Method","targets":1},{"name":"OVL","targets":2}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[-1,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="dataset-construction" class="section level3 hasAnchor" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> Dataset construction<a href="lalonde-dehejia-wahba-ldw-data.html#dataset-construction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For the subsequent estimation, we need to construct datasets of the top‑ranked methods. Therefore, we match all method names back to their corresponding datasets, objects or vectors and construct corresponding datasets.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-1" tabindex="-1"></a>trim_only_cps <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb167-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-2" tabindex="-1"></a>        <span class="at">ps_threshold =</span> ldw_cps.ps_trim,</span>
<span id="cb167-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-3" tabindex="-1"></a>        <span class="at">common_range =</span> ldw_cps.ps_common,</span>
<span id="cb167-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-4" tabindex="-1"></a>        <span class="at">stuermer =</span> ldw_cps.ps_stuermer,</span>
<span id="cb167-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-5" tabindex="-1"></a>        <span class="at">walker =</span> ldw_cps.ps_walker,</span>
<span id="cb167-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-6" tabindex="-1"></a>        <span class="at">crump =</span> ldw_cps.ps_crump</span>
<span id="cb167-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-7" tabindex="-1"></a>)</span>
<span id="cb167-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-8" tabindex="-1"></a></span>
<span id="cb167-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-9" tabindex="-1"></a>match_lookup_cps <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb167-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-10" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(nn_trim_comb.cps, all_trim.cps, <span class="st">&quot;nn&quot;</span>),</span>
<span id="cb167-11"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-11" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(k2_trim_comb.cps, all_trim.cps, <span class="st">&quot;k2&quot;</span>),</span>
<span id="cb167-12"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-12" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(k3_trim_comb.cps, all_trim.cps, <span class="st">&quot;k3&quot;</span>),</span>
<span id="cb167-13"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-13" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(caliper_trim_comb.cps, all_trim.cps, <span class="st">&quot;caliper&quot;</span>),</span>
<span id="cb167-14"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-14" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(cs_trim_comb.cps, all_trim.cps, <span class="st">&quot;cs&quot;</span>),</span>
<span id="cb167-15"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-15" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(mahvars_trim_comb.cps, all_trim.cps, <span class="st">&quot;mahvars&quot;</span>),</span>
<span id="cb167-16"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-16" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(optimal_pair_trim_comb.cps, all_trim.cps, <span class="st">&quot;optimal_pair&quot;</span>),</span>
<span id="cb167-17"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-17" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(optimal_full_trim_comb.cps, all_trim.cps, <span class="st">&quot;optimal_full&quot;</span>),</span>
<span id="cb167-18"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-18" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(genetic_trim_comb.cps, all_trim.cps, <span class="st">&quot;genetic&quot;</span>),</span>
<span id="cb167-19"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-19" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(exact_trim_comb.cps, all_trim.cps, <span class="st">&quot;exact&quot;</span>),</span>
<span id="cb167-20"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-20" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(cem_trim_comb.cps, all_trim.cps, <span class="st">&quot;cem&quot;</span>),</span>
<span id="cb167-21"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-21" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(subcl_trim_comb.cps, all_trim.cps, <span class="st">&quot;subcl&quot;</span>)</span>
<span id="cb167-22"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-22" tabindex="-1"></a>)</span>
<span id="cb167-23"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-23" tabindex="-1"></a></span>
<span id="cb167-24"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-24" tabindex="-1"></a>trim_only_psid <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb167-25"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-25" tabindex="-1"></a>        <span class="at">ps_threshold =</span> ldw_psid.ps_trim,</span>
<span id="cb167-26"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-26" tabindex="-1"></a>        <span class="at">common_range =</span> ldw_psid.ps_common,</span>
<span id="cb167-27"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-27" tabindex="-1"></a>        <span class="at">stuermer =</span> ldw_psid.ps_stuermer,</span>
<span id="cb167-28"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-28" tabindex="-1"></a>        <span class="at">walker =</span> ldw_psid.ps_walker,</span>
<span id="cb167-29"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-29" tabindex="-1"></a>        <span class="at">crump =</span> ldw_psid.ps_crump</span>
<span id="cb167-30"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-30" tabindex="-1"></a>)</span>
<span id="cb167-31"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-31" tabindex="-1"></a></span>
<span id="cb167-32"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-32" tabindex="-1"></a>match_lookup_psid <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb167-33"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-33" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(nn_trim_comb.psid, all_trim.psid, <span class="st">&quot;nn&quot;</span>),</span>
<span id="cb167-34"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-34" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(k2_trim_comb.psid, all_trim.psid, <span class="st">&quot;k2&quot;</span>),</span>
<span id="cb167-35"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-35" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(k3_trim_comb.psid, all_trim.psid, <span class="st">&quot;k3&quot;</span>),</span>
<span id="cb167-36"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-36" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(caliper_trim_comb.psid, all_trim.psid, <span class="st">&quot;caliper&quot;</span>),</span>
<span id="cb167-37"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-37" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(cs_trim_comb.psid, all_trim.psid, <span class="st">&quot;cs&quot;</span>),</span>
<span id="cb167-38"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-38" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(mahvars_trim_comb.psid, all_trim.psid, <span class="st">&quot;mahvars&quot;</span>),</span>
<span id="cb167-39"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-39" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(optimal_pair_trim_comb.psid, all_trim.psid, <span class="st">&quot;optimal_pair&quot;</span>),</span>
<span id="cb167-40"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-40" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(optimal_full_trim_comb.psid, all_trim.psid, <span class="st">&quot;optimal_full&quot;</span>),</span>
<span id="cb167-41"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-41" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(genetic_trim_comb.psid, all_trim.psid, <span class="st">&quot;genetic&quot;</span>),</span>
<span id="cb167-42"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-42" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(exact_trim_comb.psid, all_trim.psid, <span class="st">&quot;exact&quot;</span>),</span>
<span id="cb167-43"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-43" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(cem_trim_comb.psid, all_trim.psid, <span class="st">&quot;cem&quot;</span>),</span>
<span id="cb167-44"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-44" tabindex="-1"></a>        <span class="fu">wrap_match_entries</span>(subcl_trim_comb.psid, all_trim.psid, <span class="st">&quot;subcl&quot;</span>)</span>
<span id="cb167-45"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-45" tabindex="-1"></a>)</span>
<span id="cb167-46"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-46" tabindex="-1"></a></span>
<span id="cb167-47"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-47" tabindex="-1"></a>list_cps <span class="ot">&lt;-</span> <span class="fu">c</span>(trim_only_cps, match_lookup_cps)</span>
<span id="cb167-48"><a href="lalonde-dehejia-wahba-ldw-data.html#cb167-48" tabindex="-1"></a>list_psid <span class="ot">&lt;-</span> <span class="fu">c</span>(trim_only_psid, match_lookup_psid)</span></code></pre></div>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb168-1" tabindex="-1"></a><span class="co"># create datasets corresponding to the top 5 methods for each dataset</span></span>
<span id="cb168-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb168-2" tabindex="-1"></a>top5_datasets.cps <span class="ot">&lt;-</span> <span class="fu">create_top5_datasets</span>(list_cps, top5_methods.cps)</span>
<span id="cb168-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb168-3" tabindex="-1"></a>top5_datasets.psid <span class="ot">&lt;-</span> <span class="fu">create_top5_datasets</span>(list_psid, top5_methods.psid)</span></code></pre></div>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb169-1" tabindex="-1"></a><span class="co"># save datasets into .RData files</span></span>
<span id="cb169-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb169-2" tabindex="-1"></a><span class="fu">save_top5_datasets</span>(list_cps, top5_methods.cps, <span class="at">prefix =</span> <span class="st">&quot;ldw_model_a_cps1&quot;</span>)</span>
<span id="cb169-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb169-3" tabindex="-1"></a><span class="fu">save_top5_datasets</span>(list_psid, top5_methods.psid, <span class="at">prefix =</span> <span class="st">&quot;ldw_model_a_psid1&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="estimating" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Estimating<a href="lalonde-dehejia-wahba-ldw-data.html#estimating" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="average-treatment-effect-on-the-treated-att" class="section level3 hasAnchor" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Average treatment effect on the treated (ATT)<a href="lalonde-dehejia-wahba-ldw-data.html#average-treatment-effect-on-the-treated-att" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we estimate the average treatment effect on the treated (ATT) using the LDW-Experimental sample, the top‑ranked observational samples (LDW‑CPS1 and LDW‑PSID1), and, for comparison, the trimmed and matched plus‑datasets. We employ a broad set of estimators, including difference-in-means, regression, the Oaxaca-Blinder estimator, generalized random forests (GRF) as an outcome model, 1:5 nearest neighbor matching with bias correction, inverse probability weighting (IPW) with GRF-based propensity scores, covariate balancing propensity score (CBPS), entropy balancing, double/debiased machine learning using elastic net, and augmented inverse probability weighting (AIPW) via GRF. We also incorporate the recently introduced estimand-specific AIPW estimator implemented through an expansion of the <code>OutcomeWeights</code> R package by <span class="citation">Knaus and Pfleiderer (<a href="#ref-OW_Package">2024</a>)</span>.</p>
<p>We utilize the <code>estimate_all()</code> and <code>plot_coef()</code> functions as defined by <span class="citation">Imbens and Xu (<a href="#ref-imbens2024">2024</a>)</span>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-1" tabindex="-1"></a><span class="co"># estimate ATT</span></span>
<span id="cb170-2"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-2" tabindex="-1"></a>out1 <span class="ot">&lt;-</span> <span class="fu">estimate_all</span>(ldw, <span class="st">&quot;re78&quot;</span>, <span class="st">&quot;treat&quot;</span>, covar)</span>
<span id="cb170-3"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-3" tabindex="-1"></a><span class="co"># out2 &lt;- estimate_all(ldw_cps, &quot;re78&quot;, &quot;treat&quot;, covar)</span></span>
<span id="cb170-4"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-4" tabindex="-1"></a><span class="co"># out3 &lt;- estimate_all(ldw_psid, &quot;re78&quot;, &quot;treat&quot;, covar)</span></span>
<span id="cb170-5"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-5" tabindex="-1"></a></span>
<span id="cb170-6"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-6" tabindex="-1"></a><span class="co"># out.cps &lt;- lapply(top5_datasets.cps, function(d) estimate_all(d, &quot;re78&quot;, &quot;treat&quot;, covar))</span></span>
<span id="cb170-7"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-7" tabindex="-1"></a><span class="co"># out.psid &lt;- lapply(top5_datasets.psid, function(d) estimate_all(d, &quot;re78&quot;, &quot;treat&quot;, covar))</span></span>
<span id="cb170-8"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-8" tabindex="-1"></a></span>
<span id="cb170-9"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-9" tabindex="-1"></a><span class="co"># out4 &lt;- out.cps[[1]]</span></span>
<span id="cb170-10"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-10" tabindex="-1"></a><span class="co"># out5 &lt;- out.cps[[2]]</span></span>
<span id="cb170-11"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-11" tabindex="-1"></a><span class="co"># out6 &lt;- out.cps[[3]]</span></span>
<span id="cb170-12"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-12" tabindex="-1"></a><span class="co"># out7 &lt;- out.cps[[4]]</span></span>
<span id="cb170-13"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-13" tabindex="-1"></a><span class="co"># out8 &lt;- out.cps[[5]]</span></span>
<span id="cb170-14"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-14" tabindex="-1"></a></span>
<span id="cb170-15"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-15" tabindex="-1"></a><span class="co"># out9 &lt;- out.psid[[1]]</span></span>
<span id="cb170-16"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-16" tabindex="-1"></a><span class="co"># out10 &lt;- out.psid[[2]]</span></span>
<span id="cb170-17"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-17" tabindex="-1"></a><span class="co"># out11 &lt;- out.psid[[3]]</span></span>
<span id="cb170-18"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-18" tabindex="-1"></a><span class="co"># out12 &lt;- out.psid[[4]]</span></span>
<span id="cb170-19"><a href="lalonde-dehejia-wahba-ldw-data.html#cb170-19" tabindex="-1"></a><span class="co"># out13 &lt;- out.psid[[5]]</span></span></code></pre></div>

<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div class="csl-entry">
Greifer, Noah. 2025. <span>“Matching Methods.”</span>
</div>
<div class="csl-entry">
Imbens, Guido W., and Yiqing Xu. 2024. <span>“LaLonde (1986) After Nearly Four Decades: Lessons Learned.”</span>
</div>
<div class="csl-entry">
Knaus, Michael C., and Henri Pfleiderer. 2024. <span>“Outcome Weights.”</span>
</div>
<div class="csl-entry">
Stürmer, Til, Michael Webster-Clark, Jennifer L. Lund, Richard Wyss, Alan R. Ellis, Mark Lunt, Kenneth J. Rothman, and Robert J. Glynn. 2021. <span>“Propensity Score Weighting and Trimming Strategies for Reducing Variance and Bias of Treatment Effect Estimates: A Simulation Study.”</span> <em>American Journal of Epidemiology</em>.
</div>
</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Greifer_3_2025" class="csl-entry">
Greifer, Noah. 2025. <span>“Matching Methods.”</span>
</div>
<div id="ref-imbens2024" class="csl-entry">
Imbens, Guido W., and Yiqing Xu. 2024. <span>“LaLonde (1986) After Nearly Four Decades: Lessons Learned.”</span>
</div>
<div id="ref-OW_Package" class="csl-entry">
Knaus, Michael C., and Henri Pfleiderer. 2024. <span>“Outcome Weights.”</span>
</div>
<div id="ref-Stuermer_2021" class="csl-entry">
Stürmer, Til, Michael Webster-Clark, Jennifer L. Lund, Richard Wyss, Alan R. Ellis, Mark Lunt, Kenneth J. Rothman, and Robert J. Glynn. 2021. <span>“Propensity Score Weighting and Trimming Strategies for Reducing Variance and Bias of Treatment Effect Estimates: A Simulation Study.”</span> <em>American Journal of Epidemiology</em>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/lkrsl/Application-of-Outcome-Weights-Framework-for-DML-to-Lalonde-Study/edit/main/tutorial/02-LDW-Model-A.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["Outcome-Weights.pdf", "Outcome-Weights.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
